law_groups = {
	japanese_government = {
		law_type = realm
	}
}

laws = {
	japanese_government_0 = { # Bureaucratic
		group = japanese_government
		#default = yes
		potential = {
			holder_scope = {
				is_feudal = yes
				OR = {
					religion = shinto
					AND = {
						religion = buddhist
						culture_group = japonic
					}
				}
				controls_religion = no # The Tenno has his own government
				NOT = {
					is_government_potential = chinese_imperial_government # If we could be Chinese Imperial, that takes precedence
				}
				NOR = {
					has_character_flag = force_japanese_feudal_government
					has_character_flag = force_japanese_monastic_feudal_government
				}
			}
			OR = {
				NOT = {
					has_law = japanese_government_2 # Monastic Feudal
				}
				holder_scope = {
					ai = no
				}
			}
		}
		allow = {}
		effect = {
			holder_scope = {
				set_government_type = chinese_vassal_government # Necessary to make the law change go through, but doesn't actually change the government
			}
			hidden_tooltip = {
				holder_scope = {
					set_character_flag = force_chinese_vassal_government
				}
				revoke_law = japanese_government_1
				revoke_law = japanese_government_2
				revoke_law = japanese_government_3
				holder_scope = {
					character_event = { id = japan.8 } # Handle the government change
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
		ai_will_revoke = {
			factor = 0
		}
	}
	japanese_government_1 = { # Feudal
		group = japanese_government
		potential = {
			holder_scope = {
				is_feudal = yes
				OR = {
					religion = shinto
					AND = {
						religion = buddhist
						culture_group = japonic
					}
				}
				controls_religion = no # The Tenno has his own government
				NOT = {
					is_government_potential = chinese_imperial_government # If we could be Chinese Imperial, that takes precedence
				}
				NOR = {
					has_character_flag = force_chinese_vassal_government
					has_character_flag = force_japanese_monastic_feudal_government
				}
			}
			OR = {
				NOT = {
					has_law = japanese_government_2 # Monastic Feudal
				}
				holder_scope = {
					ai = no
				}
			}
		}
		allow = {
			holder_scope = {
				OR = {
					independent = yes
					NOT = {
						any_liege = {
							OR = {
								government = chinese_imperial_government
								government = japanese_imperial_government
								government = chinese_vassal_government
							}
						}
					}
					AND = {
						NOT = {
							any_liege = {
								government = chinese_imperial_government
							}
						}
						any_liege = {
							OR = {
								government = japanese_imperial_government
								government = chinese_vassal_government
							}
							PREV = {
								vassals_can_change_to_japanese_feudal_trigger = yes
							}
						}
					}
				}
			}
		}
		effect = {
			holder_scope = {
				set_government_type = japanese_feudal_government # Necessary to make the law change go through, but doesn't actually change the government
			}
			hidden_tooltip = {
				holder_scope = {
					set_character_flag = force_japanese_feudal_government
				}
				revoke_law = japanese_government_0
				revoke_law = japanese_government_2
				revoke_law = japanese_government_3
				holder_scope = {
					character_event = { id = japan.8 } # Handle the government change
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2
				always = yes
			}
		}
		ai_will_revoke = {
			factor = 0
		}
	}
	japanese_government_2 = { # Monastic Feudal
		group = japanese_government
		potential = {
			holder_scope = {
				is_feudal = yes
				religion = shinto
				controls_religion = no # The Tenno has his own government
				NOR = {
					has_character_flag = force_chinese_vassal_government
					has_character_flag = force_japanese_feudal_government
				}
			}
		}
		allow = {
			holder_scope = {
				can_become_japanese_monastic_feudal_trigger = yes
				has_law = japanese_government_1
			}
		}
		effect = {
			holder_scope = {
				set_government_type = japanese_monastic_feudal_government # Necessary to make the law change go through, but doesn't actually change the government
			}
			hidden_tooltip = {
				holder_scope = {
					set_character_flag = force_japanese_monastic_feudal_government
				}
				revoke_law = japanese_government_0
				revoke_law = japanese_government_1
				revoke_law = japanese_government_3
				holder_scope = {
					character_event = { id = japan.8 } # Handle the government change
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2
				always = yes
			}
		}
		ai_will_revoke = {
			factor = 0
		}
	}
	japanese_government_3 = {
		potential = {
			holder_scope = {
				is_feudal = yes
				religion = shinto
				controls_religion = yes # The Tenno has his own government
			}
		}
		allow = {
			always = no # The Tenno won't be changing his laws
		}
		revoke_allowed = {
			always = no
		}
		effect = {
			hidden_tooltip = {
				revoke_law = japanese_government_0
				revoke_law = japanese_government_1
				revoke_law = japanese_government_2
			}
		}
		ai_will_do = {
			factor = 0
		}
		ai_will_revoke = {
			factor = 0
		}
	}
}