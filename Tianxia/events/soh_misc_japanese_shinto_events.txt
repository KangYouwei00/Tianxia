# Regnal names for Emperors of Japan
# Go-[Name] is just [Name] II
# Name reuse should be relatively rare
# Names before the history for k_chrysanthemum_throne (and k_japan) are not usable, to prevent numbering conflicts

# by Silverswee(e)per

namespace = japan

# on_new_holder event for k_chrysanthemum_throne

character_event = {
	id = japan.1
	desc = EVTDESC_JAPAN_1
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	# 0
	
	option = {
		trigger = {
			NOT = {
				has_character_flag = emperor_of_japan_namelist_1
			}
		}
		
		name = KEITAI
		
		set_name = Keitai
		
		set_character_flag = emperor_keitai_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_keitai_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_keitai # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_keitai_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_keitai_used # Very few names reused historically
				}
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				has_character_flag = emperor_of_japan_namelist_1
			}
		}
		
		name = ANKAN
		
		set_name = Ankan
		
		set_character_flag = emperor_ankan_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_ankan_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_ankan # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_ankan_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_ankan_used # Very few names reused historically
				}
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				has_character_flag = emperor_of_japan_namelist_1
			}
		}
		
		name = SENKA
		
		set_name = Senka
		
		set_character_flag = emperor_senka_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_senka_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_senka # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_senka_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_senka_used # Very few names reused historically
				}
			}
		}
	}
	
	# 1
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_1
					NOT = {
						has_character_flag = emperor_of_japan_namelist_2
					}
				}
				ai = yes
			}
		}
		
		name = KINMEI
		
		set_name = Kinmei
		
		set_character_flag = emperor_kinmei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kinmei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kinmei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kinmei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kinmei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_1
					NOT = {
						has_character_flag = emperor_of_japan_namelist_2
					}
				}
				ai = yes
			}
		}
		
		name = BIDATSU
		
		set_name = Bidatsu
		
		set_character_flag = emperor_bidatsu_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_bidatsu_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_bidatsu # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_bidatsu_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_bidatsu_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_1
					NOT = {
						has_character_flag = emperor_of_japan_namelist_2
					}
				}
				ai = yes
			}
		}
		
		name = YOMEI
		
		set_name = Yomei
		
		set_character_flag = emperor_yomei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_yomei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_yomei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_yomei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_yomei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
	}
	
	# 2
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_2
					NOT = {
						has_character_flag = emperor_of_japan_namelist_3
					}
				}
				ai = yes
			}
		}
		
		name = SUSHUN
		
		set_name = Sushun
		
		set_character_flag = emperor_sushun_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_sushun_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_sushun # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_sushun_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_sushun_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_2
					NOT = {
						has_character_flag = emperor_of_japan_namelist_3
					}
				}
				ai = yes
			}
		}
		
		name = SUIKO
		
		set_name = Suiko
		
		set_character_flag = emperor_suiko_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_suiko_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_suiko # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_suiko_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_suiko_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_2
					NOT = {
						has_character_flag = emperor_of_japan_namelist_3
					}
				}
				ai = yes
			}
		}
		
		name = JOMEI
		
		set_name = Jomei
		
		set_character_flag = emperor_jomei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_jomei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_jomei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_jomei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_jomei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
	}
	
	# 4
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_3
					NOT = {
						has_character_flag = emperor_of_japan_namelist_4
					}
				}
				ai = yes
			}
		}
		
		name = KOGYOKU
		
		set_name = Kogyoku
		
		set_character_flag = emperor_kogyoku_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kogyoku_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kogyoku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kogyoku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kogyoku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_3
					NOT = {
						has_character_flag = emperor_of_japan_namelist_4
					}
				}
				ai = yes
			}
		}
		
		name = KOTOKU
		
		set_name = Kotoku
		
		set_character_flag = emperor_kotoku_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kotoku_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kotoku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kotoku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kotoku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_3
					NOT = {
						has_character_flag = emperor_of_japan_namelist_4
					}
				}
				ai = yes
			}
		}
		
		name = SAIMEI
		
		set_name = Saimei
		
		set_character_flag = emperor_saimei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_saimei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_saimei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_saimei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_saimei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
	}
	
	# 5
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_4
					NOT = {
						has_character_flag = emperor_of_japan_namelist_5
					}
				}
				ai = yes
			}
		}
		
		name = TENCHI
		
		set_name = Tenchi
		
		set_character_flag = emperor_tenchi_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_tenchi_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_tenchi # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_tenchi_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_tenchi_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_4
					NOT = {
						has_character_flag = emperor_of_japan_namelist_5
					}
				}
				ai = yes
			}
		}
		
		name = KOBUN
		
		set_name = Kobun
		
		set_character_flag = emperor_kobun_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kobun_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kobun # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kobun_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kobun_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_4
					NOT = {
						has_character_flag = emperor_of_japan_namelist_5
					}
				}
				ai = yes
			}
		}
		
		name = TENMU
		
		set_name = Tenmu
		
		set_character_flag = emperor_tenmu_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_tenmu_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_tenmu # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_tenmu_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_tenmu_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
	}
	
	# 6
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_5
					NOT = {
						has_character_flag = emperor_of_japan_namelist_6
					}
				}
				ai = yes
			}
		}
		
		name = JITO
		
		set_name = Jito
		
		set_character_flag = emperor_jito_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_jito_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_jito # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_jito_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_jito_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_5
					NOT = {
						has_character_flag = emperor_of_japan_namelist_6
					}
				}
				ai = yes
			}
		}
		
		name = MONMU
		
		set_name = Monmu
		
		set_character_flag = emperor_monmu_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_monmu_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_monmu # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_monmu_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_monmu_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_5
					NOT = {
						has_character_flag = emperor_of_japan_namelist_6
					}
				}
				ai = yes
			}
		}
		
		name = GENMEI
		
		set_name = Genmei
		
		set_character_flag = emperor_genmei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_genmei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_genmei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_genmei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_genmei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
	}
	
	# 7
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_6
					NOT = {
						has_character_flag = emperor_of_japan_namelist_7
					}
				}
				ai = yes
			}
		}
		
		name = GENSHO
		
		set_name = Gensho
		
		set_character_flag = emperor_gensho_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_gensho_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_gensho # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_gensho_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_gensho_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_6
					NOT = {
						has_character_flag = emperor_of_japan_namelist_7
					}
				}
				ai = yes
			}
		}
		
		name = SHOMU
		
		set_name = Shomu
		
		set_character_flag = emperor_shomu_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_shomu_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_shomu # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_shomu_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_shomu_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_6
					NOT = {
						has_character_flag = emperor_of_japan_namelist_7
					}
				}
				ai = yes
			}
		}
		
		name = KOKEN
		
		set_name = Koken
		
		set_character_flag = emperor_koken_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_koken_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_koken # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_koken_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_koken_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
	}
	
	# 8
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_7
					NOT = {
						has_character_flag = emperor_of_japan_namelist_8
					}
				}
				ai = yes
			}
		}
		
		name = JUNNIN
		
		set_name = Junnin
		
		set_character_flag = emperor_junnin_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_junnin_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_junnin # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_junnin_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_junnin_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_7
					NOT = {
						has_character_flag = emperor_of_japan_namelist_8
					}
				}
				ai = yes
			}
		}
		
		name = SHOTOKU
		
		set_name = Shotoku
		
		set_character_flag = emperor_yomei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_yomei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_shotoku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_shotoku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = yes # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_shotoku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_7
					NOT = {
						has_character_flag = emperor_of_japan_namelist_8
					}
				}
				ai = yes
			}
		}
		
		name = KONIN
		
		set_name = Konin
		
		set_character_flag = emperor_konin_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_konin_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_konin # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_konin_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_konin_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
	}
	
	# 9
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_8
					NOT = {
						has_character_flag = emperor_of_japan_namelist_9
					}
				}
				ai = yes
			}
		}
		
		name = KANMU
		
		set_name = Kanmu
		
		set_character_flag = emperor_kanmu_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kanmu_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kanmu # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kanmu_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kanmu_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_8
					NOT = {
						has_character_flag = emperor_of_japan_namelist_9
					}
				}
				ai = yes
			}
		}
		
		name = HEIZEI
		
		set_name = Heizei
		
		set_character_flag = emperor_heizei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_heizei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_heizei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_heizei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_heizei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_8
					NOT = {
						has_character_flag = emperor_of_japan_namelist_9
					}
				}
				ai = yes
			}
		}
		
		name = SAGA
		
		set_name = Saga
		
		set_character_flag = emperor_saga_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_saga_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_saga # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_saga_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_saga_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
	}
	
	# 10
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_9
					NOT = {
						has_character_flag = emperor_of_japan_namelist_10
					}
				}
				ai = yes
			}
		}
		
		name = JUNNA
		
		set_name = Junna
		
		set_character_flag = emperor_junna_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_junna_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_junna # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_junna_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_junna_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_9
					NOT = {
						has_character_flag = emperor_of_japan_namelist_10
					}
				}
				ai = yes
			}
		}
		
		name = NINMYO
		
		set_name = Ninmyo
		
		set_character_flag = emperor_ninmyo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_ninmyo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_ninmyo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_ninmyo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_ninmyo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_9
					NOT = {
						has_character_flag = emperor_of_japan_namelist_10
					}
				}
				ai = yes
			}
		}
		
		name = MONTOKU
		
		set_name = Montoku
		
		set_character_flag = emperor_montoku_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_montoku_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_montoku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_montoku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_montoku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
	}
	
	# 11
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_10
					NOT = {
						has_character_flag = emperor_of_japan_namelist_11
					}
				}
				ai = yes
			}
		}
		
		name = SEIWA
		
		set_name = Seiwa
		
		set_character_flag = emperor_seiwa_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_seiwa_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_seiwa # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_seiwa_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_seiwa_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_10
					NOT = {
						has_character_flag = emperor_of_japan_namelist_11
					}
				}
				ai = yes
			}
		}
		
		name = YOZEI
		
		set_name = Yozei
		
		set_character_flag = emperor_yozei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_yozei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_yozei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_yozei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_yozei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_10
					NOT = {
						has_character_flag = emperor_of_japan_namelist_11
					}
				}
				ai = yes
			}
		}
		
		name = KOKO
		
		set_name = Koko
		
		set_character_flag = emperor_koko_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_koko_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_koko # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_koko_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_koko_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
	}
	
	# 12
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_11
					NOT = {
						has_character_flag = emperor_of_japan_namelist_12
					}
				}
				ai = yes
			}
		}
		
		name = UDA
		
		set_name = Uda
		
		set_character_flag = emperor_uda_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_uda_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_uda # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_uda_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_uda_used # Very few names reused historically
				}
			}
		} 
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_11
					NOT = {
						has_character_flag = emperor_of_japan_namelist_12
					}
				}
				ai = yes
			}
		}
		
		name = DAIGO
		
		set_name = Daigo
		
		set_character_flag = emperor_daigo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_daigo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_daigo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_daigo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_daigo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_11
					NOT = {
						has_character_flag = emperor_of_japan_namelist_12
					}
				}
				ai = yes
			}
		}
		
		name = SUZAKU
		
		set_name = Suzaku
		
		set_character_flag = emperor_suzaku_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_suzaku_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_suzaku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_suzaku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_suzaku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
	}
	
	# 13
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_12
					NOT = {
						has_character_flag = emperor_of_japan_namelist_13
					}
				}
				ai = yes
			}
		}
		
		name = MURAKAMI
		
		set_name = Murakami
		
		set_character_flag = emperor_murakami_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_murakami_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_murakami # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_murakami_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_murakami_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_12
					NOT = {
						has_character_flag = emperor_of_japan_namelist_13
					}
				}
				ai = yes
			}
		}
		
		name = REZEI
		
		set_name = Rezei
		
		set_character_flag = emperor_rezei_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_rezei_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_rezei # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_rezei_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_rezei_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_12
					NOT = {
						has_character_flag = emperor_of_japan_namelist_13
					}
				}
				ai = yes
			}
		}
		
		name = ENYU
		
		set_name = Enyu
		
		set_character_flag = emperor_enyu_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_enyu_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_enyu # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_enyu_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_enyu_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
	}
	
	# 14
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_13
					NOT = {
						has_character_flag = emperor_of_japan_namelist_14
					}
				}
				ai = yes
			}
		}
		
		name = KAZAN
		
		set_name = Kazan
		
		set_character_flag = emperor_kazan_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kazan_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kazan # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kazan_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kazan_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_13
					NOT = {
						has_character_flag = emperor_of_japan_namelist_14
					}
				}
				ai = yes
			}
		}
		
		name = ICHIJO
		
		set_name = Ichijo
		
		set_character_flag = emperor_ichijo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_ichijo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_ichijo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_ichijo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_ichijo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_13
					NOT = {
						has_character_flag = emperor_of_japan_namelist_14
					}
				}
				ai = yes
			}
		}
		
		name = SANJO
		
		set_name = Sanjo
		
		set_character_flag = emperor_sanjo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_sanjo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_sanjo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_sanjo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_sanjo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
	}
	
	# 15
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_14
					NOT = {
						has_character_flag = emperor_of_japan_namelist_15
					}
				}
				ai = yes
			}
		}
		
		name = SHIRAKAWA
		
		set_name = Shirakawa
		
		set_character_flag = emperor_shirakawa_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_shirakawa_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_shirakawa # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_shirakawa_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_shirakawa_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_14
					NOT = {
						has_character_flag = emperor_of_japan_namelist_15
					}
				}
				ai = yes
			}
		}
		
		name = HORIKAWA
		
		set_name = Horikawa
		
		set_character_flag = emperor_horikawa_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_horikawa_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_horikawa # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_horikawa_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_horikawa_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_14
					NOT = {
						has_character_flag = emperor_of_japan_namelist_15
					}
				}
				ai = yes
			}
		}
		
		name = TOBA
		
		set_name = Toba
		
		set_character_flag = emperor_toba_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_toba_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_toba # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_toba_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_toba_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
	}
	
	# 16
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_15
					NOT = {
						has_character_flag = emperor_of_japan_namelist_16
					}
				}
				ai = yes
			}
		}
		
		name = SUTOKU
		
		set_name = Sutoku
		
		set_character_flag = emperor_sutoku_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_sutoku_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_sutoku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_sutoku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_sutoku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_15
					NOT = {
						has_character_flag = emperor_of_japan_namelist_16
					}
				}
				ai = yes
			}
		}
		
		name = KONOE
		
		set_name = Konoe
		
		set_character_flag = emperor_konoe_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_konoe_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_konoe # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_konoe_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_konoe_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_15
					NOT = {
						has_character_flag = emperor_of_japan_namelist_16
					}
				}
				ai = yes
			}
		}
		
		name = NIJO
		
		set_name = Nijo
		
		set_character_flag = emperor_nijo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_nijo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_nijo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_nijo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_nijo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
	}
	
	# 17
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_16
					NOT = {
						has_character_flag = emperor_of_japan_namelist_17
					}
				}
				ai = yes
			}
		}
		
		name = ROKUJO
		
		set_name = Rokujo
		
		set_character_flag = emperor_rokujo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_rokujo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_rokujo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_rokujo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_rokujo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_16
					NOT = {
						has_character_flag = emperor_of_japan_namelist_17
					}
				}
				ai = yes
			}
		}
		
		name = TAKAKURA
		
		set_name = Takakura
		
		set_character_flag = emperor_takakura_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_takakura_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_takakura # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_takakura_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_takakura_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_16
					NOT = {
						has_character_flag = emperor_of_japan_namelist_17
					}
				}
				ai = yes
			}
		}
		
		name = ANTOKU
		
		set_name = Antoku
		
		set_character_flag = emperor_antoku_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_antoku_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_antoku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_antoku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_antoku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
	}
	
	# 18
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_17
					NOT = {
						has_character_flag = emperor_of_japan_namelist_18
					}
				}
				ai = yes
			}
		}
		
		name = TSUCHIMIKADO
		
		set_name = Tsuchimikado
		
		set_character_flag = emperor_tsuchimikado_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_tsuchimikado_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_tsuchimikado # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_tsuchimikado_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_tsuchimikado_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_17
					NOT = {
						has_character_flag = emperor_of_japan_namelist_18
					}
				}
				ai = yes
			}
		}
		
		name = JUNTOKU
		
		set_name = Juntoku
		
		set_character_flag = emperor_juntoku_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_juntoku_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_juntoku # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_juntoku_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_juntoku_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_17
					NOT = {
						has_character_flag = emperor_of_japan_namelist_18
					}
				}
				ai = yes
			}
		}
		
		name = SHUKYO
		
		set_name = Shukyo
		
		set_character_flag = emperor_shukyo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_shukyo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_shukyo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_shukyo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_shukyo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
	}
	
	# 19
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_18
					NOT = {
						has_character_flag = emperor_of_japan_namelist_19
					}
				}
				ai = yes
			}
		}
		
		name = SHIJO
		
		set_name = Shijo
		
		set_character_flag = emperor_shijo_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_shijo_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_shijo # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_shijo_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_shijo_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
		clr_character_flag = emperor_of_japan_namelist_18
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_18
					NOT = {
						has_character_flag = emperor_of_japan_namelist_19
					}
				}
				ai = yes
			}
		}
		
		name = FUKAKUSA
		
		set_name = Fukakusa
		
		set_character_flag = emperor_fukakusa_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_fukakusa_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_fukakusa # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_fukakusa_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_fukakusa_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
		clr_character_flag = emperor_of_japan_namelist_18
	}
	
	option = {
		trigger = {
			OR = {
				AND = {
					has_character_flag = emperor_of_japan_namelist_18
					NOT = {
						has_character_flag = emperor_of_japan_namelist_19
					}
				}
				ai = yes
			}
		}
		
		name = KAMEYAMA
		
		set_name = Kameyeama
		
		set_character_flag = emperor_kameyama_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kameyama_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kameyama # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kameyama_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kameyama_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
		clr_character_flag = emperor_of_japan_namelist_18
	}
	
	# 20
	
	option = {
		trigger = {
			OR = {
				has_character_flag = emperor_of_japan_namelist_19
				ai = yes
			}
		}
		
		name = FUSHIMI
		
		set_name = Fushimi
		
		set_character_flag = emperor_fushimi_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_fushimi_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_fushimi # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_fushimi_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_fushimi_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
		clr_character_flag = emperor_of_japan_namelist_18
		clr_character_flag = emperor_of_japan_namelist_19
	}
	
	option = {
		trigger = {
			OR = {
				has_character_flag = emperor_of_japan_namelist_19
				ai = yes
			}
		}
		
		name = HANAZONO
		
		set_name = Hanazono
		
		set_character_flag = emperor_hanazono_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_hanazono_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_hanazono # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_hanazono_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_hanazono_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
		clr_character_flag = emperor_of_japan_namelist_18
		clr_character_flag = emperor_of_japan_namelist_19
	}
	
	option = {
		trigger = {
			OR = {
				has_character_flag = emperor_of_japan_namelist_19
				ai = yes
			}
		}
		
		name = KOGON
		
		set_name = Kogon
		
		set_character_flag = emperor_kogon_used
		
		k_chrysanthemum_throne = {
			set_title_flag = emperor_kogon_used
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_character_flag = emperor_kogon # Historical names are generally picked
			}
			modifier = {
				factor = 0.001
				has_character_flag = emperor_kogon_used # Pick a new regnal name, if possible
			}
			modifier = {
				factor = 10
				is_female = no # Favours same gender as historical emperors with that name
			}
			modifier = {
				factor = 0.1
				k_chrysanthemum_throne = {
					has_title_flag = emperor_kogon_used # Very few names reused historically
				}
			}
		}
		
		clr_character_flag = emperor_of_japan_namelist_1
		clr_character_flag = emperor_of_japan_namelist_2
		clr_character_flag = emperor_of_japan_namelist_3
		clr_character_flag = emperor_of_japan_namelist_4
		clr_character_flag = emperor_of_japan_namelist_5
		clr_character_flag = emperor_of_japan_namelist_6
		clr_character_flag = emperor_of_japan_namelist_7
		clr_character_flag = emperor_of_japan_namelist_8
		clr_character_flag = emperor_of_japan_namelist_9
		clr_character_flag = emperor_of_japan_namelist_10
		clr_character_flag = emperor_of_japan_namelist_11
		clr_character_flag = emperor_of_japan_namelist_12
		clr_character_flag = emperor_of_japan_namelist_13
		clr_character_flag = emperor_of_japan_namelist_14
		clr_character_flag = emperor_of_japan_namelist_15
		clr_character_flag = emperor_of_japan_namelist_16
		clr_character_flag = emperor_of_japan_namelist_17
		clr_character_flag = emperor_of_japan_namelist_18
		clr_character_flag = emperor_of_japan_namelist_19
	}
	
	# Repeat
	
	option = {
		trigger = {
			ai = no
		}
		
		name = EVTOPTA_JAPAN_1
		
		if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_19
			}
			clr_character_flag = emperor_of_japan_namelist_19
			clr_character_flag = emperor_of_japan_namelist_18
			clr_character_flag = emperor_of_japan_namelist_17
			clr_character_flag = emperor_of_japan_namelist_16
			clr_character_flag = emperor_of_japan_namelist_15
			clr_character_flag = emperor_of_japan_namelist_14
			clr_character_flag = emperor_of_japan_namelist_13
			clr_character_flag = emperor_of_japan_namelist_12
			clr_character_flag = emperor_of_japan_namelist_11
			clr_character_flag = emperor_of_japan_namelist_10
			clr_character_flag = emperor_of_japan_namelist_9
			clr_character_flag = emperor_of_japan_namelist_8
			clr_character_flag = emperor_of_japan_namelist_7
			clr_character_flag = emperor_of_japan_namelist_6
			clr_character_flag = emperor_of_japan_namelist_5
			clr_character_flag = emperor_of_japan_namelist_4
			clr_character_flag = emperor_of_japan_namelist_3
			clr_character_flag = emperor_of_japan_namelist_2
			clr_character_flag = emperor_of_japan_namelist_1
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_18
			}
			set_character_flag = emperor_of_japan_namelist_19
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_17
			}
			set_character_flag = emperor_of_japan_namelist_18
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_16
			}
			set_character_flag = emperor_of_japan_namelist_17
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_15
			}
			set_character_flag = emperor_of_japan_namelist_16
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_14
			}
			set_character_flag = emperor_of_japan_namelist_15
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_13
			}
			set_character_flag = emperor_of_japan_namelist_14
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_12
			}
			set_character_flag = emperor_of_japan_namelist_13
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_11
			}
			set_character_flag = emperor_of_japan_namelist_12
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_10
			}
			set_character_flag = emperor_of_japan_namelist_11
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_9
			}
			set_character_flag = emperor_of_japan_namelist_10
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_8
			}
			set_character_flag = emperor_of_japan_namelist_9
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_7
			}
			set_character_flag = emperor_of_japan_namelist_8
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_6
			}
			set_character_flag = emperor_of_japan_namelist_7
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_5
			}
			set_character_flag = emperor_of_japan_namelist_6
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_4
			}
			set_character_flag = emperor_of_japan_namelist_5
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_3
			}
			set_character_flag = emperor_of_japan_namelist_4
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_2
			}
			set_character_flag = emperor_of_japan_namelist_3
			repeat_event = { id = japan.1 }
		}
		else_if = {
			limit = {
				has_character_flag = emperor_of_japan_namelist_1
			}
			set_character_flag = emperor_of_japan_namelist_2
			repeat_event = { id = japan.1 }
		}
		else = {
			set_character_flag = emperor_of_japan_namelist_1
			repeat_event = { id = japan.1 }
		}
	}
}

# Buddhism appears from "nowhere"
province_event = {
	id = japan.2
	desc = EVTDESC_JAPAN_2
	picture = GFX_evt_burning_house
	border = GFX_event_normal_frame_religion
	
	trigger = {
		religion = shinto
	}
	
	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 2.0
			religion_authority = 0.6
		}
		modifier = {
			factor = 2.0
			religion_authority = 0.8
		}
		modifier = {
			factor = 2
			has_game_rule = {
				name = religious_conversion
				value = slower
			}
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.4 }
		}
	}
	
	immediate = {
		religion = buddhist
		add_province_modifier = {
			name = religious_unrest
			duration = 730
		}
	}
	
	option = {
		name = {
			text = EVTOPTA_JAPAN_2
			trigger = {
				owner = {
					NOR = {
						religion = shinto
						religion = ROOT
					}
				}
			}
		}
		name = {
			text = EVTOPTB_JAPAN_2
			trigger = { owner = { religion = ROOT } }
		}
		name = {
			text = EVTOPTC_JAPAN_2
			trigger = { owner = { religion = shinto } }
		}
		if = {
			limit = { 
				ruler = { religion = shinto }
			}
			ruler = { piety = -10 }
		}
		# News spread
		hidden_tooltip = {
			owner = {
				top_liege = {
					if = {
						limit = {
							NOT = { character = PREV }
						}
						character_event = { id = japan.3 days = 2 }
					}
					any_vassal = {
						limit = {
							OR = {
								is_parent_religion = ROOT
								religion = ROOT
							}
						}
						character_event = { id = japan.3 days = 2 }
					}
				}
			}
		}
	}
}

# News spread in realm
character_event = {
	id = japan.3
	desc = EVTDESC_JAPAN_3
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_3
		trigger = {
			NOR = {
				religion = shinto
				religion = FROM
			}
		}
	}
	option = {
		name = EVTOPTB_JAPAN_3
		trigger = {
			religion = FROM
		}
	}
	option = {
		name = EVTOPTC_JAPAN_3
		trigger = {
			religion = shinto
		}
	}
}

# Random religion appears from "nowehere"
province_event = {
	id = japan.4
	desc = EVTDESC_JAPAN_4
	picture = GFX_evt_burning_house
	border = GFX_event_normal_frame_religion
		
	trigger = {
		religion = shinto
		any_neighbor_province = {
			OR = {
				AND = {
					has_owner = yes
					NOR = {
						religion = shinto
						religion_group = pagan_group
						religion = jain # Shouldn't spread to silly places!
						religion = buddhist # Has its own event
					}
				}
				AND = {
					is_land = no
					any_neighbor_province = {
						OR = {
							AND = {
								has_owner = yes
								NOR = {
									religion = shinto
									religion_group = pagan_group
									religion = jain # Shouldn't spread to silly places!
									religion = buddhist # Has its own event
								}
							}
							AND = {
								is_land = no
								any_neighbor_province = {
									NOR = {
										religion = shinto
										religion_group = pagan_group
										religion = jain # Shouldn't spread to silly places!
										religion = buddhist # Has its own event
									}
								}
							}
						}
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 9600
		modifier = {
			factor = 2.0
			religion_authority = 0.6
		}
		modifier = {
			factor = 2.0
			religion_authority = 0.8
		}
		modifier = {
			factor = 2
			has_game_rule = {
				name = religious_conversion
				value = slower
			}
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.4 }
		}
	}
	
	immediate = {
		random_list = {
			34 = {
				modifier = {
					factor = 0
					NOT = {
						any_neighbor_province = {
							has_owner = yes
							NOR = {
								religion = shinto
								religion_group = pagan_group
								religion = jain # Shouldn't spread to silly places!
								religion = buddhist # Has its own event
							}
						}
					}
				}
				random_neighbor_province = {
					limit = {
						has_owner = yes
						NOR = {
							religion = shinto
							religion_group = pagan_group
							religion = jain # Shouldn't spread to silly places!
							religion = buddhist # Has its own event
						}
					}
					ROOT = {
						religion = PREV
					}
				}
			}
			33 = {
				modifier = {
					factor = 0
					NOT = {
						any_neighbor_province = {
							is_land = no
							any_neighbor_province = {
								has_owner = yes
								NOR = {
									religion = shinto
									religion_group = pagan_group
									religion = jain # Shouldn't spread to silly places!
									religion = buddhist # Has its own event
								}
							}
						}
					}
				}
				random_neighbor_province = {
					limit = {
						is_land = no
					}
					random_neighbor_province = {
						limit = {
							has_owner = yes
							NOR = {
								religion = shinto
								religion_group = pagan_group
								religion = jain # Shouldn't spread to silly places!
								religion = buddhist # Has its own event
							}
						}
						ROOT = {
							religion = PREV
						}
					}
				}
			}
			33 = {
				modifier = {
					factor = 0
					NOT = {
						any_neighbor_province = {
							is_land = no
							any_neighbor_province = {
								is_land = no
								any_neighbor_province = {
									has_owner = yes
									NOR = {
										religion = shinto
										religion_group = pagan_group
										religion = jain # Shouldn't spread to silly places!
										religion = buddhist # Has its own event
									}
								}
							}
						}
					}
				}
				random_neighbor_province = {
					limit = {
						is_land = no
					}
					random_neighbor_province = {
						limit = {
							is_land = no
						}
						random_neighbor_province = {
							limit = {
								has_owner = yes
								NOR = {
									religion = shinto
									religion_group = pagan_group
									religion = jain # Shouldn't spread to silly places!
									religion = buddhist # Has its own event
								}
							}
							ROOT = {
								religion = PREV
							}
						}
					}
				}
			}
		}
		add_province_modifier = {
			name = religious_unrest
			duration = 730
		}
	}
	
	option = {
		name = {
			text = EVTOPTA_JAPAN_4
			trigger = {
				owner = {
					NOR = {
						religion = shinto
						religion = ROOT
					}
				}
			}
		}
		name = {
			text = EVTOPTB_JAPAN_4
			trigger = { owner = { religion = ROOT } }
		}
		name = {
			text = EVTOPTC_JAPAN_4
			trigger = { owner = { religion = shinto } }
		}
		if = {
			limit = { 
				ruler = { religion = shinto }
			}
			ruler = { piety = -10 }
		}
		# News spread
		hidden_tooltip = {
			owner = {
				top_liege = {
					if = {
						limit = {
							NOT = { character = PREV }
						}
						character_event = { id = japan.5 days = 2 }
					}
					any_vassal = {
						limit = {
							OR = {
								is_parent_religion = ROOT
								religion = ROOT
							}
						}
						character_event = { id = japan.5 days = 2 }
					}
				}
			}
		}
	}
}

# News spread in realm
character_event = {
	id = japan.5
	desc = EVTDESC_JAPAN_5
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_5
		trigger = {
			NOR = {
				religion = shinto
				religion = FROM
			}
		}
	}
	option = {
		name = EVTOPTB_JAPAN_5
		trigger = {
			religion = FROM
		}
	}
	option = {
		name = EVTOPTC_JAPAN_5
		trigger = {
			religion = shinto
		}
	}
}

# Actual on_action trigger for regnal names
character_event = {
	id = japan.6
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			title = k_chrysanthemum_throne
		}
	}
	
	immediate = {
		character_event = { id = japan.1 days = 1 }
	}
}

# Government warning - no longer used!
character_event = {
	id = japan.7
	is_triggered_only = yes
	picture = GFX_evt_china_golden_age # Needs better picture!
	desc = {
		trigger = {
			trait = japanese_feudal_trait
		}
		text = EVTDESCA_JAPAN_7
	}
	desc = {
		trigger = {
			trait = japanese_monastic_trait
		}
		text = EVTDESCB_JAPAN_7
	}
	
	ai = no
	
	trigger = {
		OR = {
			religion = shinto
			AND = {
				culture_group = japonic
				religion = buddhist
			}
		}
		controls_religion = no
		OR = {
			trait = japanese_feudal_trait
			trait = japanese_monastic_trait
		}
		NOT = {
			has_global_flag = japanese_government_warning_disbled
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_7 # Ok
	}
	
	option = {
		name = EVTOPTB_JAPAN_7 # Don't tell me again
		set_global_flag = japanese_government_warning_disbled
	}
	
	option = {
		name = EVTOPTC_JAPAN_7 # Change my government type
		hidden_tooltip = {
			remove_trait = japanese_feudal_trait
			remove_trait = japanese_monastic_trait
		}
		set_government_type = chinese_vassal_government
		character_event = { id = japan.8 }
	}
}

# Government change
character_event = {
	id = japan.8
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		OR = {
			religion = shinto
			AND = {
				religion = buddhist
				culture_group = japonic
			}
		}
		controls_religion = no
		is_feudal = yes
		primary_title = {
			holy_order = no
		}
		NOT = {
			is_government_potential = chinese_imperial_government
		}
	}
	
	immediate = {
		log = "Government change in Japan!"
		# Change government
		if = {
			limit = {
				trait = japanese_monastic_trait
			}
			set_government_type = japanese_monastic_feudal_government
		}
		else_if = {
			limit = {
				trait = japanese_feudal_trait
			}
			set_government_type = japanese_feudal_government
		}
		else = {
			set_government_type = chinese_vassal_government
		}
	}
}

# Inheritance of government trait
character_event = {
	id = japan.9
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		OR = {
			religion = shinto
			AND = {
				religion = buddhist
				culture_group = japonic
			}
		}
		controls_religion = no
	}
	
	immediate = {
		log = "Government trait inheritance in Japan!"
		if = {
			limit = {
				primary_title = {
					is_vice_royalty = yes
				}
			}
			current_heir = {
				save_event_target_as = true_heir
			}
			log = "[Root.GetBestName]'s current heir is [true_heir.GetName]"
			any_demesne_title = {
				limit = {
					is_vice_royalty = yes
				}
				event_target:true_heir = {
					grant_title_no_opinion = {
						target = PREV
						type = inheritance
					}
				}
			}
			recalc_succession = yes
			log = "[Root.GetBestName]'s current heir is [true_heir.GetName]"
			current_heir = {
				save_event_target_as = true_heir
			}
		}
		else = {
			current_heir = {
				save_event_target_as = true_heir
			}
		}
		if = {
			limit = {
				event_target:true_heir = {
					AND = {
						OR = {
							religion = shinto
							AND = {
								religion = buddhist
								culture_group = japonic
							}
						}
						controls_religion = no
					}
					NOR = {
						trait = japanese_feudal_trait
						trait = japanese_monastic_trait
					}
					NOT = {
						is_liege_or_above_of = ROOT
					}
					NOR = {
						government = chinese_imperial_government
						government = japanese_imperial_government
					}
				}
			}
			if = {
				limit = {
					trait = japanese_feudal_trait
				}
				event_target:true_heir = {
					add_trait = japanese_feudal_trait
				}
			}
			else_if = {
				limit = {
					trait = japanese_monastic_trait
				}
				event_target:true_heir = {
					add_trait = japanese_monastic_trait
				}
			}
		}
		
		if = {
			limit = {
				trait = japanese_regent
				event_target:true_heir = {
					NOT = {
						religion = shinto
						controls_religion = yes
					}
				}
			}
			event_target:true_heir = {
				add_trait = japanese_regent
				if = {
					limit = {
						liege = {
							religion = shinto
							controls_religion = yes
						}
						has_job_title = job_spymaster
					}
					remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
				}
			}
			log = "[true_heir.GetBestName] is now the regent!"
		}
	}
}

# Make sure that the Tenno never holds multiple empires - we don't want k_chrysanthemum_throne and e_japan to separate outside of a shogunate
character_event = {
	id = japan.10
	is_triggered_only = yes
	hide_window = yes
	
	religion = shinto
	
	trigger = {
		controls_religion = yes
		FROM = {
			tier = emperor
		}
		NOT = {
			has_character_flag = restoring_japan
		}
		num_of_emperor_titles = 2
	}
	
	immediate = {
		if = {
			limit = {
				any_demesne_title = {
					title = e_japan
				}
			}
			any_demesne_title = {
				limit = {
					tier = emperor
					NOT = {
						title = e_japan
					}
				}
				destroy_landed_title = THIS
			}
		}
		else = {
			primary_title = {
				set_title_flag = keep_this_title
			}
			any_demesne_title = {
				limit = {
					tier = emperor
					NOT = {
						has_title_flag = keep_this_title
					}
				}
				unsafe_destroy_landed_title = THIS
			}
			primary_title = {
				clr_title_flag = keep_this_title
			}
		}
	}
}

### Regency stuff

# on_startup regency setup
character_event = {
	id = japan.11
	hide_window = yes
	is_triggered_only = yes
	
	religion = shinto
	
	trigger = {
		controls_religion = yes
		trait = under_regency
	}
	
	immediate = {
		log = "Setting up the Regent for [Root.GetBestName]!"
		random_vassal = {
			limit = {
				trait = japanese_regent
			}
			liege = {
				regent = {
					log = "[This.GetBestName] is the initial Regent!"
					remove_title = title_regent
				}
			}
			log = "[This.GetBestName] is the new Regent!"
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
		}
		primary_title = {
			save_event_target_as = regency_loyalist_title
		}
		regent = {
			if = {
				limit = {
					higher_tier_than = baron
				}
				start_faction = {
					faction = faction_regent_loyalists
					title = event_target:regency_loyalist_title
				}
				save_event_target_as = regent_to_be_loyal_to
				if = {
					limit = {
						NOT = {
							dynasty = ROOT
						}
					}
					any_dynasty_member = {
						limit = {
							is_landed = yes
							higher_tier_than = baron
							liege = {
								character = ROOT
							}
							NOT = {
								has_non_aggression_pact_with = ROOT
							}
						}
						join_faction = {
							faction = faction_regent_loyalists
							faction_leader = event_target:regent_to_be_loyal_to
							ignore_requirements = yes
						}
					}
				}
			}
		}
	}
}

# on_new_holder event making sure the under_regency trait is passed on properly
character_event = {
	id = japan.12
	hide_window = yes
	is_triggered_only = yes
	
	religion = shinto
	
	trigger = {
		FROM = {
			title = k_chrysanthemum_throne
		}
		#has_global_flag = japanese_regency
	}
	
	immediate = {
		if = {
			limit = {
				FROMFROM = {
					trait = under_regency
				}
			}
			FROMFROM = {
				remove_trait = under_regency
			}
			add_trait = under_regency
		}
		if = {
			limit = {
				trait = under_regency2
			}
			remove_trait = under_regency2
			if = {
				limit = {
					any_vassal = {
						trait = japanese_regent2
					}
				}
				any_vassal = {
					limit = {
						trait = japanese_regent
					}
					remove_trait = japanese_regent
				}
				random_vassal = {
					limit = {
						trait = japanese_regent2
					}
					remove_trait = japanese_regent2
					add_trait = japanese_regent
					liege = {
						regent = {
							remove_title = title_regent
						}
					}
					give_minor_title = title_regent
					give_minor_title = title_appointed_regent
				}
			}
		}
	}
}

# on_yearly_pulse event clearing out the japanese_regent trait if we shouldn't have it
character_event = {
	id = japan.13
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = japanese_regent
		NOR = {
			liege = {
				religion = shinto
				controls_religion = yes
			}
			top_liege = {
				liege_before_war = {
					religion = shinto
					controls_religion = yes
				}
			}
			liege_before_war = {
				religion = shinto
				controls_religion = yes
			}
		}
	}
	
	immediate = {
		remove_trait = japanese_regent
	}
}

# on_new_holder event making sure that we become the regent if we should be
character_event = {
	id = japan.14
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = japanese_regent
		liege = {
			religion = shinto
			controls_religion = yes
		}
		FROMFROM = {
			is_alive = no
		}
		has_regent = no
	}
	
	immediate = {
		liege = {
			regent = {
				remove_title = title_regent
			}
		}
		give_minor_title = title_regent
		give_minor_title = title_appointed_regent
	}
}


# on_new_holder_usurpation event passing on the japanese_regent trait if the former character no longer should have it
character_event = {
	id = japan.15
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROMFROM = {
			trait = japanese_regent
			OR = {
				is_ruler = no
				NOR = {
					liege = {
						religion = shinto
						controls_religion = yes
					}
					top_liege = {
						liege_before_war = {
							religion = shinto
							controls_religion = yes
						}
					}
					liege_before_war = {
						religion = shinto
						controls_religion = yes
					}
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			remove_trait = japanese_regent
		}
		if = {
			limit = {
				NOT = {
					religion = shinto
					controls_religion = yes
				}
			}
			add_trait = japanese_regent
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					liege = {
						religion = shinto
						controls_religion = yes
					}
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
	}
}

# on_adulthood and on_yearly_pulse regent switching if necessary
character_event = {
	id = japan.16
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = japanese_regent
		liege = {
			religion = shinto
			controls_religion = yes
		}
		liege = {
			has_actual_regency_trigger = yes
			regent = {
				NOT = {
					trait = japanese_regent
				}
			}
		}
		has_regent = no
	}
	
	immediate = {
		liege = {
			regent = {
				remove_title = title_regent
			}
		}
		give_minor_title = title_regent
		give_minor_title = title_appointed_regent
	}
}

# on_new_holder event clearing out the japanese_regent trait if you are the Tenno, since being your own regent is weird!
character_event = {
	id = japan.17
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		religion = shinto
		controls_religion = yes
	}
	
	immediate = {
		remove_trait = japanese_regent
	}
}

### Plot to end the regency (deprecated, but saved in case anything is of interest elsewhere)

# Ultimatum - end the regency
letter_event = {
	id = japan.18
	desc = EVTDESC_JAPAN_18
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			any_plot_backer = {
				set_defacto_liege = FROM
				reverse_opinion = {
					who = ROOT
					modifier = opinion_seeks_to_overthrow_me
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_18 # I guess that's fair...
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				FROM = { NOT = { plot_power = 1.0 } }
			}				
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
			modifier = {
				factor = 0
				relative_power_to_liege = 1 # Given that the liege will lose levies, this should mean we'll win
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.5 # An even fight
			}
		}
		hidden_tooltip = {
			FROM = {
				letter_event = { id = japan.19 }
				any_plot_backer = {
					letter_event = { id = japan.20 }
				}
			}
		}
		remove_trait = japanese_regent
		FROM = {
			remove_trait = under_regency
		}
	}
	option = {
		name = EVTOPTB_JAPAN_18
		ai_chance = {
			factor = 90
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 0.75
				FROM = { plot_power = 1.5 }
			}
			modifier = {
				factor = 0.5
				FROM = { plot_power = 2.0 }
			}
			modifier = {
				factor = 0.5
				FROM = { plot_power = 3.0 }
			}
			modifier = {
				factor = 0.5
				FROM = { plot_power = 4.0 }
			}
			# We don't have the numbers to win easily...
			modifier = {
				factor = 0.8
				NOT = {
					relative_power_to_liege = 0.4
				}
			}
			modifier = {
				factor = 0.8
				NOT = {
					relative_power_to_liege = 0.3
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					relative_power_to_liege = 0.2
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					relative_power_to_liege = 0.1
				}
			}
		}
		FROM = {
			remove_trait = under_regency
		}
		FROM = {
			letter_event = { id = japan.21 }
			any_plot_backer = {
				letter_event = { id = japan.22 }
			}
		}
	}
}

# Demand accepted - end the regency
letter_event = {
	id = japan.19
	desc = EVTDESC_JAPAN_19
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_19 # Assuming direct control!
	}	
}

# Inform backers that the demand was accepted - end the regency
letter_event = {
	id = japan.20
	desc = EVTDESC_JAPAN_20
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_20 # Good to hear!
	}
}

# Demand refused - start the war
letter_event = {
	id = japan.21
	desc = EVTDESC_JAPAN_21
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_21 # Then face me in battle!
		FROM = {
			reverse_war = {
				target = ROOT
				casus_belli = end_regency_war
				plot_backers = yes
			}
		}
	}
}

# Demand refused - backers
letter_event = {
	id = japan.22
	desc = EVTDESC_JAPAN_22
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_22 # Let's hope FROMFROM prevails!
	}
}

# Check to see troop ratio and maybe fire the plot - needs to happen as an event because the plot is weird
letter_event = {
	id = japan.23
	desc = EVTDESC_JAPAN_23
	
	is_triggered_only = yes
	
#	immediate = {
#		export_to_variable = {
#			which = levy_comparison_variable
#			value = realm_levies
#		}
#		set_variable = {
#			which = current_realm_levies
#			which = levy_comparison_variable
#		}
#		regent = {
#			ROOT = {
#				export_to_variable = {
#					which = regent_levies
#					value = realm_levies
#					who = PREV
#				}
#				export_to_variable = {
#					which = regent_power_comparison
#					value = relative_power_to_liege
#					who = PREV
#				}
#			}
#		}
#		set_variable = {
#			which = regent_levies_with_backers
#			which = regent_levies
#		}
#		multiply_variable = {
#			which = regent_power_comparison
#			value = 100
#		}
#		
#		set_variable = {
#			which = plotter_levies
#			value = 0
#		}
#		any_plot_backer = {
#			limit = {
#				ROOT = {
#					regent = {
#						any_vassal = {
#							character = PREVPREV
#						}
#					}
#				}
#			}
#			export_to_variable = {
#				which = plotter_levies
#				value = realm_levies
#			}
#			ROOT = {
#				change_variable = {
#					which = plotter_levies
#					value = plotter_levies
#					who = PREV
#				}
#			}
#		}
#		subtract_variable = {
#			which = regent_levies
#			which = plotter_levies
#		}
#		subtract_variable = {
#			which = levy_comparison_variable
#			which = regent_levies
#		}
#		divide_variable = {
#			which = levy_comparison_variable
#			which = regent_levies
#		}
#	}
	
	option = {
		name = EVTOPTA_JAPAN_23 # This is the time!
		
		plot_target_char = {
			letter_event = { id = japan.18 }
		}
		hidden_tooltip = {
			set_character_flag = plot_overthrow_my_regent_taken
			activate_plot = yes
		}
		
#		ai_chance = {
#			factor = 1
#			modifier = {
#				factor = 0
#				NOR = {
#					check_variable = {
#						which = levy_comparison_variable
#						value = 1
#					}
#					NOT = {
#						regent = {
#							relative_power_to_liege = 0.5
#						}
#					}
#				}
#			}
#			modifier = {
#				factor = 0
#				trait = craven
#				NOR = {
#					check_variable = {
#						which = levy_comparison_variable
#						value = 2
#					}
#					NOT = {
#						regent = {
#							relative_power_to_liege = 0.25
#						}
#					}
#				}
#			}
#		}
	}
	option = {
		name = EVTOPTB_JAPAN_23 # I need to wait...
		
#		ai_chance = {
#			factor = 1
#			modifier = {
#				factor = 0
#				NOT = {
#					trait = craven
#				}
#				check_variable = {
#					which = levy_comparison_variable
#					value = 1
#				}
#			}
#			modifier = {
#				factor = 0
#				check_variable = {
#					which = levy_comparison_variable
#					value = 2
#				}
#			}
#		}
	}
}

### Ask the regent to step aside (no plot)

# Regent asked nicely
letter_event = {
	id = japan.24
	desc = EVTDESC_JAPAN_24
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_24 # Sure!
		
		remove_trait = japanese_regent
		FROM = {
			remove_trait = under_regency
			letter_event = { id = japan.25 } # Inform FROM
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 5
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_24 # Not happening!
		
		FROM = {
			letter_event = { id = japan.26 } # Inform FROM
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
				}
				NOR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
}

# Reply positive
letter_event = {
	id = japan.25
	desc = EVTDESC_JAPAN_25
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_25 # Good to hear!
	}
}

# Reply negative
letter_event = {
	id = japan.26
	desc = EVTDESC_JAPAN_26
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_26 # Curses!
	}
}

### Ask nicely to become the regent

# Liege asked nicely
letter_event = {
	id = japan.27
	desc = EVTDESC_JAPAN_27
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_27 # Sure!
		
		add_trait = under_regency
		regency_setup_nice_effect = yes
		FROM = {
			add_trait = japanese_regent
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
			letter_event = { id = japan.28 } # Inform FROM
		}
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						FROM = {
							any_owned_bloodline = {
								has_bloodline_flag = regency_bloodline
								bloodline_is_active_for = PREV
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 5
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_27 # Not happening!
		
		FROM = {
			letter_event = { id = japan.29 } # Inform FROM
		}
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						FROM = {
							any_owned_bloodline = {
								has_bloodline_flag = regency_bloodline
								bloodline_is_active_for = PREV
							}
						}
					}
				}
				NOR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
}

# Reply positive
letter_event = {
	id = japan.28
	desc = EVTDESC_JAPAN_28
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_28 # Good to hear!
	}
}

# Reply negative
letter_event = {
	id = japan.29
	desc = EVTDESC_JAPAN_29
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_29 # Curses!
	}
}

### Plot to become permanent regent fires

# Inform the liege
letter_event = {
	id = japan.30
	desc = EVTDESC_JAPAN_30
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_30 # I can't do anything about this...
		regency_setup_not_nice_effect = yes
		
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		
		add_trait = under_regency
		FROM = {
			add_trait = japanese_regent
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
	}
}

# Inform co-conspirators
letter_event = {
	id = japan.31
	desc = EVTDESC_JAPAN_31
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_31 # Good to hear!
		opinion = {
			modifier = opinion_supported_as_regent
			who = FROM
			years = 10
		}
	}
}

# Inform all vassals
letter_event = {
	id = japan.32
	desc = EVTDESC_JAPAN_32
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_32 # I see...
	}
}

### Regency faction

# Liege gets ultimatum
letter_event = {
	id = japan.33
	desc = EVTDESC_JAPAN_33
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { in_faction = faction_regent }
	}
	
	immediate = {
		FROM = { 
			diplomatic_immunity = yes 
			any_faction_backer = {
				faction = faction_regent
				diplomatic_immunity = yes
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_33 # I suppose I have to accept this...
		regency_setup_not_nice_effect = yes
		
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_regent
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_regent
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_regent
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0			
				NOT = {
					FROM = {
						faction_power = {
							faction = faction_regent
							power = 1.0
						}
					}
				}
			}		
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		add_trait = under_regency
		FROM = {
			add_trait = japanese_regent
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
		
		hidden_tooltip = {
			FROM = {
				any_faction_backer = {
					faction = faction_regent
					letter_event = { id = japan.34 }
					diplomatic_immunity = no
				}
				letter_event = { id = japan.35 }
				diplomatic_immunity = no
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_33 # Never!
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_regent
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_regent
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_regent
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 95
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 0.75
				FROM = {
					faction_power = {
						faction = faction_regent
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent
						power = 1.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent
						power = 2.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent
						power = 3.0
					}
				}
			}	
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent
						power = 4.0
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = { faction_power = { faction = faction_regent power = 1.0 } }
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the liege's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.36 }
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { faction_power = { faction = faction_regent power = 0.75 } }
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
				if = {
					limit = {
						faction_power = { faction = faction_regent power = 0.75 }
						NOT = { faction_power = { faction = faction_regent power = 1.5 } }
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
			}
		}
	}
}

# Faction members are informed that the liege folded
letter_event = {
	id = japan.34
	desc = EVTDESC_JAPAN_34
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_34 # Good to hear!
		opinion = {
			modifier = opinion_supported_as_regent
			who = FROMFROM
			years = 10
		}
	}
}

# The regent is informed that the liege folded
letter_event = {
	id = japan.35
	desc = EVTDESC_JAPAN_35
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_35 # Assuming indirect control!
		if = {
			limit = {
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = regency_bloodline
						bloodline_is_active_for = ROOT
					}
				}
			}
			if = {
				limit = {
					is_female = no
				}
				create_bloodline = {
					type = regency_bloodline
				}
			}
			else = {
				create_bloodline = {
					type = regency_bloodline
					inheritance = matrilineal
				}
			}
		}
	}
}

# The prospective regent is informed that the liege isn't folding
letter_event = {
	id = japan.36
	desc = EVTDESC_JAPAN_36
	
	is_triggered_only = yes
	
	immediate = {
		any_faction_backer = {
			faction = faction_regent
			reverse_opinion = {
				modifier = opinion_fought_for_regent
				who = ROOT
				years = 20
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_36 # Then war it is!
		
		faction_regent = { # The target (title) of the faction
			reverse_war = {
				target = ROOT
				casus_belli = regency_faction_war
				faction = faction_regent
			}
		}
		clr_character_flag = faction_regent_ultimatum_taken
	}
}

### Plot to replace the regent

# Target informed
letter_event = {
	id = japan.37
	desc = EVTDESC_JAPAN_37
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_37 # Curses!
		FROM = {
			add_trait = japanese_regent
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_stole_the_regency
		}
		remove_trait = japanese_regent
		
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
	}
}

# Backers informed
letter_event = {
	id = japan.38
	desc = EVTDESC_JAPAN_38
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_38 # Good to hear!
		opinion = {
			modifier = opinion_supported_as_regent
			who = FROM
			years = 10
		}
	}
}

# Liege informed
letter_event = {
	id = japan.39
	desc = EVTDESC_JAPAN_39
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_39 # I see...
	}
}

### Special regent decisions

# Transfer vassal - liege
letter_event = {
	id = japan.40
	desc = EVTDESC_JAPAN_40
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_40 # I can't oppose this...
		
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_medium_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_minor_effect = yes
				}
			}
		}
		
		opinion = {
			who = FROMFROM
			modifier = took_a_vassal
		}
	}
}

# Transfer vassal - vassal
letter_event = {
	id = japan.41
	desc = EVTDESC_JAPAN_41
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			FROMFROM = {
				NOR = {
					root_has_imprisonment_reason_opinion_trigger = yes
					any_rival = {
						character = ROOT
					}
				}
			}
		}
		name = EVTOPTA_JAPAN_41 # I suppose that happened...
	}
	
	option = {
		trigger = {
			FROMFROM = {
				OR = {
					root_has_imprisonment_reason_opinion_trigger = yes
					any_rival = {
						character = ROOT
					}
				}
			}
		}
		name = EVTOPTB_JAPAN_41 # I have a bad feeling about this
	}
}

# Change liege's spouse
letter_event = {
	id = japan.42
	desc = EVTDESC_JAPAN_42
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		spouse = {
			save_event_target_as = old_spouse
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_42 # I can't oppose this...
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_medium_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_minor_effect = yes
				}
			}
		}
		
		opinion = {
			who = FROMFROM
			modifier = changed_my_spouse
		}
		remove_spouse = event_target:old_spouse
		add_consort = event_target:old_spouse
		add_spouse = FROMFROMFROM
	}
}

# Take liege's title
letter_event = {
	id = japan.43
	desc = EVTDESC_JAPAN_43
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_43 # I can't oppose this...
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_medium_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_minor_effect = yes
				}
			}
		}
		
		opinion = {
			who = FROMFROM
			modifier = took_a_title
		}
		FROM = {
			add_weak_pressed_claim = ROOT
		}
	}
}

### Shogunate factions

# Ultimatum - become Shogun
letter_event = {
	id = japan.44
	desc = EVTDESC_JAPAN_44
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { in_faction = faction_shogun }
	}
	
	immediate = {
		FROM = { 
			diplomatic_immunity = yes 
			any_faction_backer = {
				faction = faction_shogun
				diplomatic_immunity = yes
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_44 # I suppose I can't refuse...
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_shogun
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_shogun
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_shogun
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0	
				NOT = {
					FROM = {
						faction_power = 
						{
							faction = faction_shogun
							power = 1.0
						}
					}
				}
			}			
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		hidden_tooltip = {
			any_vassal = {
				limit = {
					ai = no
					NOT = { in_faction = faction_shogun }
				}
				character_event = { id = japan.46 }
			}
			FROM = {
				letter_event = { id = japan.47 }
				any_faction_backer = {
					faction = faction_shogun
					letter_event = { id = japan.45 }
					diplomatic_immunity = no
				}
				diplomatic_immunity = no
			}
		}
		copy_regency_setup_effect = yes
		FROM = {
			faction_shogun = { # The target (title) of the faction
				holder_scope = {
					FROM = {
						usurp_title = {
							target = PREVPREV
							type = faction_demand
						}
					}
				}
				# Transfer all vassals that aren't the Regent or the Tenno's relatives
				ROOT = {
					# If the Regent ended up under the Shogun due to being a king, fix that
					if = {
						limit = {
							any_vassal = {
								tier = king
								trait = japanese_regent
							}
						}
						any_vassal = {
							limit = {
								tier = king
								trait = japanese_regent
							}
							any_demesne_title = {
								limit = {
									tier = king
									NOT = {
										title = k_chrysanthemum_throne # To prevent weirdness
									}
								}
								unsafe_destroy_landed_title = THIS
								add_pressed_claim = PREV # The Regent might prefer to regain the title even if it means not being the Regent...
							}
						}
					}
					any_vassal = {
						limit = {
							higher_tier_than = baron
							NOR = {
								trait = japanese_regent
								dynasty = ROOT
							}
						}
						set_defacto_liege = FROM
					}
				}
				
				# Set the proper laws
				if = {
					limit = {
						has_dlc = "Zeus"
					}
					add_law_w_cooldown = ze_administration_laws_1 # Late Feudal
					add_law_w_cooldown = out_of_realm_inheritance_law_1 # No external inheritance (should already be in place, but...)
					add_law_w_cooldown = vassal_wars_law_0 # Unrestricted vassal wars
					succession = primogeniture # You get a get-out-of-Gavelkind/-Elective free card!
				}
				else = {
					add_law_w_cooldown = crown_authority_1 # Unrestricted vassal wars; unfortunately, this won't give the rest of the necessary laws
					add_law_w_cooldown = feudal_administration
				}
				if = {
					limit = {
						has_dlc = "Charlemagne"
					}
					add_law_w_cooldown = vice_royalty_0
				}
				# Make FROM Japanese Feudal, if possible
				if = {
					limit = {
						FROM = {
							NOT = {
								trait = japanese_monastic_trait
							}
						}
					}
					FROM = {
						add_trait = japanese_feudal_trait
						set_government_type = japanese_feudal_government
					}
				}
				# Destroy kingdoms held by the Tenno that aren't k_chrysanthemum_throne
				ROOT = {
					any_demesne_title = {
						limit = {
							tier = king
							NOT = {
								title = k_chrysanthemum_throne
							}
						}
						unsafe_destroy_landed_title = THIS
						add_pressed_claim = PREV
					}
				}
			}
		}
		paste_regency_setup_effect = yes
	}
	option = {
		name = EVTOPTB_JAPAN_44 # Never!
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_shogun
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_shogun
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_shogun
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.25
				trait = stubborn
			}
			modifier = {
				factor = 0.75
				FROM = {
					faction_power = 
					{
						faction = faction_shogun
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_shogun
						power = 1.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_shogun
						power = 2.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_shogun
						power = 3.0
					}
				}
			}	
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_shogun
						power = 4.0
					}
				}
			}	
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = { faction_power = { faction = faction_shogun power = 1.0 } }
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the liege's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.48 days = 3 tooltip = "EVTTOOLTIP8100" }
			tooltip = {
				any_faction_backer = {
					faction = faction_shogun
				}
			}
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { faction_power = { faction = faction_shogun power = 0.75 } }
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
				if = {
					limit = {
						faction_power = { faction = faction_shogun power = 0.75 }
						NOT = { faction_power = { faction = faction_shogun power = 1.5 } }
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
			}
		}
	}
}

# Inform faction backer - Become Shogun
letter_event = {
	id = japan.45
	desc = EVTDESC_JAPAN_45
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "GOOD"
		reverse_opinion = {
			modifier = opinion_grateful
			who = FROMFROM
			years = 5
		}
		opinion = {
			modifier = opinion_installed_as_shogun
			who = FROMFROM
			years = 10
		}
		add_character_modifier = {
			name = faction_shogun_timer
			hidden = yes
			duration = 3650
		}
	}
}

# Inform other vassals - Become Shogun
character_event = {
	id = japan.46
	desc = EVTDESC_JAPAN_46
	
	notification = yes
	
	picture = GFX_evt_council
	border = GFX_event_normal_frame_intrigue
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "I_SEE"
	}
}

# Demand accepted - Become Shogun
letter_event = {
	id = japan.47
	desc = EVTDESC_JAPAN_47
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		clr_character_flag = faction_shogun_ultimatum_taken
		
		add_character_modifier = {
			name = faction_shogun_timer
			hidden = yes
			duration = 3650
		}
		
		if = {
			limit = {
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = shogunate_bloodline
						bloodline_is_active_for = ROOT
					}
				}
			}
			if = {
				limit = {
					is_female = no
				}
				create_bloodline = {
					type = shogunate_bloodline
				}
			}
			else = {
				create_bloodline = {
					type = shogunate_bloodline
					inheritance = matrilineal
				}
			}
		}
	}
}

# Demand rejected - Become Shogun
letter_event = {
	id = japan.48
	desc = EVTDESC_JAPAN_48
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA8100"
		
		clr_character_flag = faction_shogun_ultimatum_taken
		
		faction_shogun = { # The target (title) of the faction
			reverse_war = {
				target = ROOT
				casus_belli = shogunate_war
				faction = faction_shogun
			}
		}
	}
}

# Ultimatum - oust Shogun
letter_event = {
	id = japan.49
	desc = EVTDESC_JAPAN_49
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { in_faction = faction_oust_shogun }
	}
	
	immediate = {
		FROM = { 
			diplomatic_immunity = yes 
			any_faction_backer = {
				faction = faction_oust_shogun
				diplomatic_immunity = yes
			}
		}
		k_chrysanthemum_throne = {
			holder_scope = {
				save_event_target_as = the_tenno
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_49
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_oust_shogun
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_oust_shogun
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_oust_shogun
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0	
				NOT = {
					FROM = {
						faction_power = 
						{
							faction = faction_oust_shogun
							power = 1.0
						}
					}
				}
			}			
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		hidden_tooltip = {
			any_vassal = {
				limit = {
					ai = no
					NOT = { in_faction = faction_oust_shogun }
				}
				character_event = { id = japan.51 }
			}
			FROM = {
				letter_event = { id = japan.52 }
				any_faction_backer = {
					faction = faction_oust_shogun
					letter_event = { id = japan.50 }
					diplomatic_immunity = no
				}
				diplomatic_immunity = no
			}
		}
		FROM = {
			opinion = {
				modifier = opinion_abdicated
				who = ROOT
				months = 12
			}
		}
		FROM = {
			# Secondary empires are forfeit, to prevent the ex-Shogun from somehow walking away with e_japan
			any_demesne_title = {
				limit = {
					tier = emperor
					is_primary_holder_title = no
				}
				unsafe_destroy_landed_title = THIS
				add_pressed_claim = PREV
			}
			faction_oust_shogun = { # The target (title) of the faction
				holder_scope = {
					event_target:the_tenno = {
						usurp_title = {
							target = PREVPREV
							type = faction_demand
						}
						# If the Tenno takes back control, the Tenno's Permanent Regency ends
						remove_trait = under_regency
						any_vassal = {
							remove_trait = japanese_regent
						}
					}
				}
				# Transfer all vassals
				ROOT = {
					any_vassal = {
						limit = {
							higher_tier_than = baron
							NOR = {
								trait = japanese_regent
								dynasty = ROOT
							}
						}
						set_defacto_liege = event_target:the_tenno
					}
					any_vassal = {
						limit = {
							trait = japanese_regent2
						}
						remove_trait = japanese_regent2
						set_defacto_liege = event_target:the_tenno
					}
					remove_trait = under_regency2
				}
				
				# Set the proper laws
				if = {
					limit = {
						has_dlc = "Zeus"
					}
					add_law_w_cooldown = ze_administration_laws_2 # Imperial
					add_law_w_cooldown = out_of_realm_inheritance_law_1 # No external inheritance
					add_law_w_cooldown = vassal_wars_law_0 # Unrestricted vassal wars; you'll have to work on blocking them again
					add_law_w_cooldown = tenno
				}
				else = {
					add_law_w_cooldown = crown_authority_1 # Unrestricted vassal wars; unfortunately, this won't give the rest of the necessary laws
					add_law_w_cooldown = imperial_administration
				}
				if = {
					limit = {
						has_dlc = "Charlemagne"
					}
					add_law_w_cooldown = vice_royalty_2
				}
				# Destroy extra kingdoms held by the ex-Shogun
				ROOT = {
					any_demesne_title = {
						limit = {
							tier = king
							NOT = {
								is_primary_holder_title = yes
							}
						}
						unsafe_destroy_landed_title = THIS
						add_pressed_claim = PREV
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTB_JAPAN_49
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_oust_shogun
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_oust_shogun
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_oust_shogun
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.25
				trait = stubborn
			}
			modifier = {
				factor = 0.75
				FROM = {
					faction_power = 
					{
						faction = faction_oust_shogun
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_oust_shogun
						power = 1.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_oust_shogun
						power = 2.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_oust_shogun
						power = 3.0
					}
				}
			}	
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = 
					{
						faction = faction_oust_shogun
						power = 4.0
					}
				}
			}	
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = { faction_power = { faction = faction_oust_shogun power = 1.0 } }
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the liege's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.53 days = 3 tooltip = "EVTTOOLTIP8100" }
			tooltip = {
				any_faction_backer = {
					faction = faction_oust_shogun
				}
			}
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { faction_power = { faction = faction_oust_shogun power = 0.75 } }
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
				if = {
					limit = {
						faction_power = { faction = faction_oust_shogun power = 0.75 }
						NOT = { faction_power = { faction = faction_oust_shogun power = 1.5 } }
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
			}
		}
	}
}

# Inform faction backer - Oust Shogun
letter_event = {
	id = japan.50
	desc = EVTDESC_JAPAN_50
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "GOOD"
		reverse_opinion = {
			modifier = opinion_grateful
			who = FROMFROM
			years = 5
		}
		opinion = {
			modifier = opinion_supported_against_shogun
			who = FROMFROM
			years = 10
		}
		add_character_modifier = {
			name = faction_shogun_timer # Should actually be this modifier; these people are not permitted to try to install a new Shogun!
			hidden = yes
			duration = 3650
		}
	}
}

# Inform other vassals - Oust Shogun
character_event = {
	id = japan.51
	desc = EVTDESC_JAPAN_51
	
	notification = yes
	
	picture = GFX_evt_council
	border = GFX_event_normal_frame_intrigue
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "I_SEE"
	}
}

# Demand accepted - Oust Shogun
letter_event = {
	id = japan.52
	desc = EVTDESC_JAPAN_52
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		clr_character_flag = faction_shogun_ultimatum_taken
		
		add_character_modifier = {
			name = faction_shogun_timer # Actually this modifier; they're not permitted to create a new Shogun for a while!
			hidden = yes
			duration = 3650
		}
	}
}

# Demand rejected - Oust Shogun
letter_event = {
	id = japan.53
	desc = EVTDESC_JAPAN_53
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA8100"
		
		clr_character_flag = faction_oust_shogun_ultimatum_taken
		
		faction_oust_shogun = { # The target (title) of the faction
			reverse_war = {
				target = ROOT
				casus_belli = end_shogunate_war
				faction = faction_oust_shogun
			}
		}
	}
}

### Proper Regent setup when title_regent changes hands

# Fired when someone without the japanese_regent trait becomes the regent
character_event = {
	id = japan.54
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		log = "[Root.GetBestName] is the Regent but shouldn't be!"
		if = {
			limit= {
				liege = {
					any_vassal = {
						trait = japanese_regent
						has_regent = no
					}
				}
			}
			liege = {
				character_event = { id = japan.55 }
			}
		}
	}
}

# Ensures that the proper regent gets the title
character_event = {
	id = japan.55
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		log = "[Root.GetBestName] is now getting a proper Regent!"
		random_vassal = {
			limit = {
				trait = japanese_regent
			}
			liege = {
				regent = {
					log = "[This.GetBestName] is the improper regent!"
					remove_title = title_regent
				}
			}
			log = "[This.GetBestName] should be the Regent!"
			give_minor_title = title_regent # Fires japan.56 automatically
			give_minor_title = title_appointed_regent
		}
	}
}

# Fired when someone with the the japanese_regent trait becomes the regent
character_event = {
	id = japan.56
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		log = "[Root.GetBestName] is the proper Regent!"
		if = {
			limit = {
				higher_tier_than = baron
			}
			liege = {
				character_event = { id = japan.57 }
			}
		}
	}
}

# Sets up the Regency Loyalist faction; should hopefully prevent "Kill the Regent and instantly issue an ultimatum" exploits
character_event = {
	id = japan.57
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		log = "The Regency Loyalists are being set up!"
		primary_title = {
			save_event_target_as = regency_loyalist_title
		}
		regent = {
			start_faction = {
				faction = faction_regent_loyalists
				title = event_target:regency_loyalist_title
			}
			log = "[This.GetBestName] is leading the Regency Loyalists!"
			save_event_target_as = regent_to_be_loyal_to
			if = {
				limit = {
					NOT = {
						dynasty = ROOT
					}
				}
				any_dynasty_member = {
					limit = {
						is_landed = yes
						higher_tier_than = baron
						liege = {
							character = ROOT
						}
						NOT = {
							has_non_aggression_pact_with = ROOT
						}
					}
					log = "[This.GetBestName] is joining the Regency Loyalists!"
					join_faction = {
						faction = faction_regent_loyalists
						faction_leader = event_target:regent_to_be_loyal_to
						ignore_requirements = yes
					}
				}
			}
		}
	}
}

### Overthrow the Regency - no Regency Loyalist faction

# Regent gets ultimatum
letter_event = {
	id = japan.58
	desc = EVTDESC_JAPAN_58
	
	is_triggered_only = yes
	
	immediate = {
		diplomatic_immunity = yes 
	}
	
	option = {
		name = EVTOPTA_JAPAN_58 # I suppose I have to accept this...
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.75
				relative_power_to_liege = 0.75
			}
			modifier = {
				factor = 0
				relative_power_to_liege = 1.0
			}
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		remove_trait = japanese_regent
		FROM = {
			remove_trait = under_regency
		}
		
		hidden_tooltip = {
			diplomatic_immunity = no
			FROM = {
				letter_event = { id = japan.59 }
				diplomatic_immunity = no
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_58 # Never!
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 95
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 0.75
				NOT = {
					relative_power_to_liege = 1.5
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOT = {
						relative_power_to_liege = 1.0
					}
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the regent's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.60 }
			hidden_tooltip = {
				if = {
					limit = {
						ROOT = {
							relative_power_to_liege = 1.5
						}
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
				if = {
					limit = {
						ROOT = {
							relative_power_to_liege = 1.0
							NOT = {
								relative_power_to_liege = 1.5
							}
						}
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
			}
		}
	}
}

# The liege is informed that the regent folded
letter_event = {
	id = japan.59
	desc = EVTDESC_JAPAN_59
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_59 # Assuming direct control!
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

# The liege is informed that the regent isn't folding
letter_event = {
	id = japan.60
	desc = EVTDESC_JAPAN_60
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_60 # Then face me in battle!
		FROM = {
			reverse_war = {
				target = ROOT
				casus_belli = end_regency_war
			}
		}
		
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

### Overthrow the Regency - Regency Loyalist faction exists

# Regent gets ultimatum
letter_event = {
	id = japan.61
	desc = EVTDESC_JAPAN_61
	
	is_triggered_only = yes
	
	
	immediate = {
		diplomatic_immunity = yes 
		any_faction_backer = {
			faction = faction_regent_loyalists
			diplomatic_immunity = yes
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_61 # I suppose I have to accept this...
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				faction_power = {
					faction = faction_regent_loyalists
					power = 1.0
				}
			}	
			modifier = {
				factor = 0
				faction_power = {
					faction = faction_regent_loyalists
					power = 1.5
				}
			}		
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		remove_trait = japanese_regent
		FROM = {
			remove_trait = under_regency
		}
		
		hidden_tooltip = {
			any_faction_backer = {
				faction = faction_regent_loyalists
				letter_event = { id = japan.62 }
				diplomatic_immunity = no
			}
			letter_event = { id = japan.63 }
			diplomatic_immunity = no
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_61 # Never!
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 95
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists
					power = 1.5
				}
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists
					power = 1.0
				}
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists
					power = 2.0
				}
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists
					power = 3.0
				}
			}	
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists
					power = 4.0
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					faction_power = { faction = faction_regent_loyalists power = 1.0 }
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the regent's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.64 }
			hidden_tooltip = {
				if = {
					limit = {
						ROOT = {
							faction_power = { faction = faction_regent_loyalists power = 1.5 }
						}
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
				if = {
					limit = {
						ROOT = {
							faction_power = { faction = faction_regent_loyalists power = 0.75 }
							NOT = {
								faction_power = { faction = faction_regent_loyalists power = 1.5 }
							}
						}
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
			}
		}
	}
}

# Faction members are informed that the regent folded
letter_event = {
	id = japan.62
	desc = EVTDESC_JAPAN_62
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_62 # Really? We had your back!
	}
}

# The liege is informed that the regent folded
letter_event = {
	id = japan.63
	desc = EVTDESC_JAPAN_63
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_63 # Assuming direct control!
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

# The liege is informed that the regent isn't folding
letter_event = {
	id = japan.64
	desc = EVTDESC_JAPAN_64
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			any_faction_backer = {
				faction = faction_regent_loyalists
				reverse_opinion = {
					modifier = opinion_fought_for_regent
					who = FROM
					years = 20
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_64 # Then face me in battle!
		
		FROM = {
			faction_regent_loyalists = { # The target (title) of the faction
				reverse_war = {
					target = FROM
					casus_belli = end_regency_war_faction
					faction = faction_regent_loyalists
				}
			}
		}
		
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

# on_startup regency setup (the first event sometimes gets... weird)
character_event = {
	id = japan.65
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		trait = japanese_regent
		liege = {
			trait = under_regency
		}
	}
	
	immediate = {
		liege = {
			random_vassal = {
				limit = {
					trait = japanese_regent
				}
				liege = {
					regent = {
						remove_title = title_regent
					}
				}
				give_minor_title = title_regent
				give_minor_title = title_appointed_regent
			}
			primary_title = {
				save_event_target_as = regency_loyalist_title
			}
			regent = {
				if = {
					limit = {
						higher_tier_than = baron
					}
					start_faction = {
						faction = faction_regent_loyalists
						title = event_target:regency_loyalist_title
					}
					save_event_target_as = regent_to_be_loyal_to
					if = {
						limit = {
							NOT = {
								dynasty = ROOT
							}
						}
						any_dynasty_member = {
							limit = {
								is_landed = yes
								higher_tier_than = baron
								liege = {
									character = ROOT
								}
								NOT = {
									has_non_aggression_pact_with = ROOT
								}
							}
							join_faction = {
								faction = faction_regent_loyalists
								faction_leader = event_target:regent_to_be_loyal_to
								ignore_requirements = yes
							}
						}
					}
				}
			}
		}
	}
}

### Special Shogun decisions

# Transfer vassal - the Shogun
letter_event = {
	id = japan.66
	desc = EVTDESC_JAPAN_66
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_66 # I can't oppose this...
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_medium_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_minor_effect = yes
				}
			}
		}
		
		opinion = {
			who = FROMFROM
			modifier = took_a_vassal
		}
	}
}

# Transfer vassal - vassal
letter_event = {
	id = japan.67
	desc = EVTDESC_JAPAN_67
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			FROMFROM = {
				NOR = {
					root_has_imprisonment_reason_opinion_trigger = yes
					any_rival = {
						character = ROOT
					}
				}
			}
		}
		name = EVTOPTA_JAPAN_67 # I suppose that happened...
	}
	
	option = {
		trigger = {
			FROMFROM = {
				OR = {
					root_has_imprisonment_reason_opinion_trigger = yes
					any_rival = {
						character = ROOT
					}
				}
			}
		}
		name = EVTOPTB_JAPAN_67 # I have a bad feeling about this
	}
}

# Change the Tenno's spouse - deprecated for the Shogun!
letter_event = {
	id = japan.68
	desc = EVTDESC_JAPAN_68
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		spouse = {
			save_event_target_as = old_spouse
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_68 # I can't oppose this...
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_medium_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_minor_effect = yes
				}
			}
		}
		
		opinion = {
			who = FROMFROM
			modifier = changed_my_spouse
		}
		remove_spouse = event_target:old_spouse
		add_consort = event_target:old_spouse
		add_spouse = FROMFROMFROM
	}
}

# Take the Shogun's title
letter_event = {
	id = japan.69
	desc = EVTDESC_JAPAN_69
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_69 # I can't oppose this...
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_medium_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_minor_effect = yes
				}
			}
		}
		
		opinion = {
			who = FROMFROM
			modifier = took_a_title
		}
		FROM = {
			add_weak_pressed_claim = ROOT
		}
	}
}

### Regency stuff for the Shogun(s)

# on_startup regency setup
character_event = {
	id = japan.70
	hide_window = yes
	is_triggered_only = yes
	
	religion = shinto
	
	trigger = {
		trait = under_regency
	}
	
	immediate = {
		random_vassal = {
			limit = {
				trait = japanese_regent2
			}
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
		}
		primary_title = {
			save_event_target_as = regency_loyalist_title
		}
		regent = {
			if = {
				limit = {
					higher_tier_than = baron
				}
				start_faction = {
					faction = faction_regent_loyalists2
					title = event_target:regency_loyalist_title
				}
				save_event_target_as = regent_to_be_loyal_to
				if = {
					limit = {
						NOT = {
							dynasty = ROOT
						}
					}
					any_dynasty_member = {
						limit = {
							is_landed = yes
							higher_tier_than = baron
							liege = {
								character = ROOT
							}
							NOT = {
								has_non_aggression_pact_with = ROOT
							}
						}
						join_faction = {
							faction = faction_regent_loyalists2
							faction_leader = event_target:regent_to_be_loyal_to
							ignore_requirements = yes
						}
					}
				}
			}
		}
	}
}

# on_new_holder event making sure the under_regency2 trait is passed on properly
character_event = {
	id = japan.71
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			tier = emperor
		}
	}
	
	immediate = {
		if = {
			limit = {
				FROMFROM = {
					NAND = {
						tier = emperor
						OR = {
							religion = shinto
							AND = {
								culture_group = japonic
								religion = buddhist
							}
						}
						NOT = {
							government = chinese_imperial_government
						}
					}
					trait = under_regency2
				}
			}
			FROMFROM = {
				remove_trait = under_regency2
			}
			if = {
				limit = {
					OR = {
						AND = {
							religion = shinto
							controls_religion = no
						}
						AND = {
							religion = buddhist
							culture_group = japonic
						}
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
				add_trait = under_regency2
			}
			# If the Tenno inherited from the Shogun, the Shogun's old regent becomes the Tenno's regent
			else_if = {
				limit = {
					religion = shinto
					controls_religion = yes	
				}
				add_trait = under_regency
				if = {
					limit = {
						any_vassal = {
							trait = japanese_regent2
						}
					}
					any_vassal = {
						limit = {
							trait = japanese_regent
						}
						remove_trait = japanese_regent
					}
					random_vassal = {
						limit = {
							trait = japanese_regent2
						}
						remove_trait = japanese_regent2
						add_trait = japanese_regent
						liege = {
							regent = {
								remove_title = title_regent
							}
						}
						give_minor_title = title_regent
						give_minor_title = title_appointed_regent
					}
				}
			}
		}
	}
}

# on_yearly_pulse event clearing out the japanese_regent trait if we shouldn't have it
character_event = {
	id = japan.72
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = japanese_regent2
		OR = {
			NOR = {
				liege = {
					OR = {
						AND = {
							religion = shinto
							controls_religion = no
						}
						AND = {
							religion = buddhist
							culture_group = japonic
						}
					}
					NOT = {
						government = chinese_imperial_government
					}
				}
				top_liege = {
					liege_before_war = {
						OR = {
							AND = {
								religion = shinto
								controls_religion = no
							}
							AND = {
								religion = buddhist
								culture_group = japonic
							}
						}
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
				liege_before_war = {
					OR = {
						AND = {
							religion = shinto
							controls_religion = no
						}
						AND = {
							religion = buddhist
							culture_group = japonic
						}
					}
					NOT = {
						government = chinese_imperial_government
					}
				}
			}
			# The Tenno can't serve as the Regent for the Shogun
			AND = {
				religion = shinto
				controls_religion = yes
			}
		}
	}
	
	immediate = {
		remove_trait = japanese_regent2
	}
}

# on_new_holder event making sure that we become the regent if we should be
character_event = {
	id = japan.73
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = japanese_regent2
		liege = {
			OR = {
				AND = {
					religion = shinto
					controls_religion = no
				}
				AND = {
					religion = buddhist
					culture_group = japonic
				}
			}
			NOT = {
				government = chinese_imperial_government
			}
		}
		FROMFROM = {
			is_alive = no
		}
		has_regent = no
	}
	
	immediate = {
		liege = {
			regent = {
				remove_title = title_regent
			}
		}
		give_minor_title = title_regent
		give_minor_title = title_appointed_regent
	}
}


# on_new_holder_usurpation event passing on the japanese_regent2 trait if the former character no longer should have it
character_event = {
	id = japan.74
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROMFROM = {
			trait = japanese_regent2
			OR = {
				is_ruler = no
				NOR = {
					liege = {
						OR = {
							AND = {
								religion = shinto
								controls_religion = no
							}
							AND = {
								religion = buddhist
								culture_group = japonic
							}
						}
						NOT = {
							government = chinese_imperial_government
						}
					}
					top_liege = {
						liege_before_war = {
							OR = {
								AND = {
									religion = shinto
									controls_religion = no
								}
								AND = {
									religion = buddhist
									culture_group = japonic
								}
							}
							NOT = {
								government = chinese_imperial_government
							}
						}
					}
					liege_before_war = {
						OR = {
							AND = {
								religion = shinto
								controls_religion = no
							}
							AND = {
								religion = buddhist
								culture_group = japonic
							}
						}
						NOT = {
							government = chinese_imperial_government
						}
					}
				}
			}
		}
	}
	
	immediate = {
		FROMFROM = {
			remove_trait = japanese_regent2
		}
		if = {
			limit = {
				# The Tenno can't be the Regent
				NOT = {
					religion = shinto
					controls_religion = yes
				}
			}
			add_trait = japanese_regent2
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					liege = {
						OR = {
							AND = {
								religion = shinto
								controls_religion = no
							}
							AND = {
								religion = buddhist
								culture_group = japonic
							}
						}
						NOT = {
							government = chinese_imperial_government
						}
					}
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
	}
}

# on_adulthood and on_yearly_pulse regent switching if necessary
character_event = {
	id = japan.75
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = japanese_regent2
		liege = {
			OR = {
				AND = {
					religion = shinto
					controls_religion = no
				}
				AND = {
					religion = buddhist
					culture_group = japonic
				}
			}
			NOT = {
				government = chinese_imperial_government
			}
		}
		liege = {
			has_actual_regency_trigger = yes
			regent = {
				NOT = {
					trait = japanese_regent2
				}
			}
		}
		has_regent = no
	}
	
	immediate = {
		liege = {
			regent = {
				remove_title = title_regent
			}
		}
		give_minor_title = title_regent
		give_minor_title = title_appointed_regent
	}
}

# on_new_holder event clearing out the japanese_regent2 trait if you are the Tenno or the Shogun
character_event = {
	id = japan.76
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			AND = {
				religion = shinto
				controls_religion = yes
			}
			real_tier = emperor
		}
	}
	
	immediate = {
		remove_trait = japanese_regent2
	}
}

### Ask the regent to step aside (no plot)

# Regent asked nicely
letter_event = {
	id = japan.77
	desc = EVTDESC_JAPAN_77
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_77 # Sure!
		
		remove_trait = japanese_regent2
		FROM = {
			remove_trait = under_regency2
			letter_event = { id = japan.78 } # Inform FROM
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 5
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_77 # Not happening!
		
		FROM = {
			letter_event = { id = japan.79 } # Inform FROM
		}
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
				}
				NOR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
}

# Reply positive
letter_event = {
	id = japan.78
	desc = EVTDESC_JAPAN_78
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_78 # Good to hear!
	}
}

# Reply negative
letter_event = {
	id = japan.79
	desc = EVTDESC_JAPAN_79
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_79 # Curses!
	}
}

### Ask nicely to become the regent

# Liege asked nicely
letter_event = {
	id = japan.80
	desc = EVTDESC_JAPAN_80
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_80 # Sure!
		
		add_trait = under_regency2
		regency_setup_nice_effect = yes
		FROM = {
			add_trait = japanese_regent2
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
			letter_event = { id = japan.81 } # Inform FROM
		}
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						FROM = {
							any_owned_bloodline = {
								has_bloodline_flag = regency_bloodline
								bloodline_is_active_for = PREV
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 5
				is_dumb_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_80 # Not happening!
		
		FROM = {
			letter_event = { id = japan.82 } # Inform FROM
		}
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					dynasty = FROM
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					opinion = {
						who = FROM
						value = 50
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						OR = {
							trait = kind
							trait = content
							trait = humble
						}
					}
					AND = {
						opinion = {
							who = FROM
							value = 25
						}
						FROM = {
							any_owned_bloodline = {
								has_bloodline_flag = regency_bloodline
								bloodline_is_active_for = PREV
							}
						}
					}
				}
				NOR = {
					trait = ambitious
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 10
				is_smart_trigger = yes
			}
		}
	}
}

# Reply positive
letter_event = {
	id = japan.81
	desc = EVTDESC_JAPAN_81
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_81 # Good to hear!
	}
}

# Reply negative
letter_event = {
	id = japan.82
	desc = EVTDESC_JAPAN_82
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_82 # Curses!
	}
}

### Plot to become permanent regent fires

# Inform the liege
letter_event = {
	id = japan.83
	desc = EVTDESC_JAPAN_83
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_83 # I can't do anything about this...
		regency_setup_not_nice_effect = yes
		
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		
		add_trait = under_regency2
		FROM = {
			add_trait = japanese_regent2
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
	}
}

# Inform co-conspirators
letter_event = {
	id = japan.84
	desc = EVTDESC_JAPAN_84
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_84 # Good to hear!
		opinion = {
			modifier = opinion_supported_as_regent
			who = FROM
			years = 10
		}
	}
}

# Inform all vassals
letter_event = {
	id = japan.85
	desc = EVTDESC_JAPAN_85
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_85 # I see...
	}
}

### Regency faction

# Liege gets ultimatum
letter_event = {
	id = japan.86
	desc = EVTDESC_JAPAN_86
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { in_faction = faction_regent2 }
	}
	
	immediate = {
		FROM = { 
			diplomatic_immunity = yes 
			any_faction_backer = {
				faction = faction_regent2
				diplomatic_immunity = yes
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_86 # I suppose I have to accept this...
		regency_setup_not_nice_effect = yes
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_regent2
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_regent2
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_regent2
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0			
				NOT = {
					FROM = {
						faction_power = {
							faction = faction_regent2
							power = 1.0
						}
					}
				}
			}		
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		add_trait = under_regency2
		FROM = {
			add_trait = japanese_regent2
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
		
		hidden_tooltip = {
			FROM = {
				any_faction_backer = {
					faction = faction_regent2
					letter_event = { id = japan.87 }
					diplomatic_immunity = no
				}
				letter_event = { id = japan.88 }
				diplomatic_immunity = no
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_86 # Never!
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
					any_faction_backer = {
						faction = faction_regent2
						detract_grace_super_huge_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
					any_faction_backer = {
						faction = faction_regent2
						detract_grace_massive_effect = yes
					}
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
					any_faction_backer = {
						faction = faction_regent2
						detract_grace_major_effect = yes
					}
				}
			}
		}
		ai_chance = {
			factor = 95
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 0.75
				FROM = {
					faction_power = {
						faction = faction_regent2
						power = 1.5
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent2
						power = 1.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent2
						power = 2.0
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent2
						power = 3.0
					}
				}
			}	
			modifier = {
				factor = 0.5
				FROM = {
					faction_power = {
						faction = faction_regent2
						power = 4.0
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = { faction_power = { faction = faction_regent2 power = 1.0 } }
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the liege's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.89 }
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { faction_power = { faction = faction_regent2 power = 0.75 } }
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
				if = {
					limit = {
						faction_power = { faction = faction_regent2 power = 0.75 }
						NOT = { faction_power = { faction = faction_regent2 power = 1.5 } }
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the revolter's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the revolter's banner
						}
					}
				}
			}
		}
	}
}

# Faction members are informed that the liege folded
letter_event = {
	id = japan.87
	desc = EVTDESC_JAPAN_87
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_87 # Good to hear!
		opinion = {
			modifier = opinion_supported_as_regent
			who = FROMFROM
			years = 10
		}
	}
}

# The regent is informed that the liege folded
letter_event = {
	id = japan.88
	desc = EVTDESC_JAPAN_88
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_88 # Assuming indirect control!
		if = {
			limit = {
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = regency_bloodline
						bloodline_is_active_for = ROOT
					}
				}
			}
			if = {
				limit = {
					is_female = no
				}
				create_bloodline = {
					type = regency_bloodline
				}
			}
			else = {
				create_bloodline = {
					type = regency_bloodline
					inheritance = matrilineal
				}
			}
		}
	}
}

# The prospective regent is informed that the liege isn't folding
letter_event = {
	id = japan.89
	desc = EVTDESC_JAPAN_89
	
	is_triggered_only = yes
	
	immediate = {
		any_faction_backer = {
			faction = faction_regent2
			reverse_opinion = {
				modifier = opinion_fought_for_regent
				who = ROOT
				years = 20
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_89 # Then war it is!
		
		faction_regent2 = { # The target (title) of the faction
			reverse_war = {
				target = ROOT
				casus_belli = regency_faction_war2
				faction = faction_regent
			}
		}
		clr_character_flag = faction_regent_ultimatum_taken
	}
}

### Plot to replace the regent

# Target informed
letter_event = {
	id = japan.90
	desc = EVTDESC_JAPAN_90
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_90 # Curses!
		FROM = {
			add_trait = japanese_regent2
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent
			give_minor_title = title_appointed_regent
			if = {
				limit = {
					has_job_title = job_spymaster
				}
				remove_title = job_spymaster # It would cause issues for the player if the spymaster couldn't be swapped...
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_stole_the_regency
		}
		remove_trait = japanese_regent2
		
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
	}
}

# Backers informed
letter_event = {
	id = japan.91
	desc = EVTDESC_JAPAN_91
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_91 # Good to hear!
		opinion = {
			modifier = opinion_supported_as_regent
			who = FROM
			years = 10
		}
	}
}

# Liege informed
letter_event = {
	id = japan.92
	desc = EVTDESC_JAPAN_92
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_92 # I see...
	}
}

### Proper Regent setup when title_regent changes hands

# Fired when someone without the japanese_regent trait becomes the regent
character_event = {
	id = japan.93
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit= {
				liege = {
					any_vassal = {
						trait = japanese_regent2
						has_regent = no
					}
				}
			}
			liege = {
				character_event = { id = japan.94 }
			}
		}
	}
}

# Ensures that the proper regent gets the title
character_event = {
	id = japan.94
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_vassal = {
			limit = {
				trait = japanese_regent2
			}
			liege = {
				regent = {
					remove_title = title_regent
				}
			}
			give_minor_title = title_regent # Fires japan.56 automatically
			give_minor_title = title_appointed_regent
		}
	}
}

# Fired when someone with the the japanese_regent trait becomes the regent
character_event = {
	id = japan.95
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				higher_tier_than = baron
			}
			liege = {
				character_event = { id = japan.96 }
			}
		}
	}
}

# Sets up the Regency Loyalist faction; should hopefully prevent "Kill the Regent and instantly issue an ultimatum" exploits
character_event = {
	id = japan.96
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		primary_title = {
			save_event_target_as = regency_loyalist_title
		}
		regent = {
			start_faction = {
				faction = faction_regent_loyalists2
				title = event_target:regency_loyalist_title
			}
			save_event_target_as = regent_to_be_loyal_to
			if = {
				limit = {
					NOT = {
						dynasty = ROOT
					}
				}
				any_dynasty_member = {
					limit = {
						is_landed = yes
						higher_tier_than = baron
						liege = {
							character = ROOT
						}
						NOT = {
							has_non_aggression_pact_with = ROOT
						}
					}
					join_faction = {
						faction = faction_regent_loyalists2
						faction_leader = event_target:regent_to_be_loyal_to
						ignore_requirements = yes
					}
				}
			}
		}
	}
}

### Overthrow the Regency - no Regency Loyalist faction

# Regent gets ultimatum
letter_event = {
	id = japan.97
	desc = EVTDESC_JAPAN_97
	
	is_triggered_only = yes
	
	immediate = {
		diplomatic_immunity = yes 
	}
	
	option = {
		name = EVTOPTA_JAPAN_97 # I suppose I have to accept this...
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.75
				relative_power_to_liege = 0.75
			}
			modifier = {
				factor = 0
				relative_power_to_liege = 1.0
			}
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		remove_trait = japanese_regent2
		FROM = {
			remove_trait = under_regency2
		}
		
		hidden_tooltip = {
			diplomatic_immunity = no
			FROM = {
				letter_event = { id = japan.98 }
				diplomatic_immunity = no
			}
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_97 # Never!
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 95
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 0.75
				NOT = {
					relative_power_to_liege = 1.5
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOT = {
						relative_power_to_liege = 1.0
					}
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the regent's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.99 }
			hidden_tooltip = {
				if = {
					limit = {
						ROOT = {
							relative_power_to_liege = 1.5
						}
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
				if = {
					limit = {
						ROOT = {
							relative_power_to_liege = 1.0
							NOT = {
								relative_power_to_liege = 1.5
							}
						}
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
			}
		}
	}
}

# The liege is informed that the regent folded
letter_event = {
	id = japan.98
	desc = EVTDESC_JAPAN_98
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_98 # Assuming direct control!
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

# The liege is informed that the regent isn't folding
letter_event = {
	id = japan.99
	desc = EVTDESC_JAPAN_99
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_99 # Then face me in battle!
		FROM = {
			reverse_war = {
				target = ROOT
				casus_belli = end_regency_war2
			}
		}
		
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

### japan.101-400 are reserved for the Hanami events

### Overthrow the Regency - Regency Loyalist faction exists

# Regent gets ultimatum
letter_event = {
	id = japan.100
	desc = EVTDESC_JAPAN_100
	
	is_triggered_only = yes
	
	
	immediate = {
		diplomatic_immunity = yes 
		any_faction_backer = {
			faction = faction_regent_loyalists2
			diplomatic_immunity = yes
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_100 # I suppose I have to accept this...
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				faction_power = {
					faction = faction_regent_loyalists2
					power = 1.0
				}
			}	
			modifier = {
				factor = 0
				faction_power = {
					faction = faction_regent_loyalists2
					power = 1.5
				}
			}	
			modifier = {
				factor = 1.25
				is_weak_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = kind
			}
			modifier = {
				factor = 1.25
				trait = charitable
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
		
		remove_trait = japanese_regent2
		FROM = {
			remove_trait = under_regency2
		}
		
		hidden_tooltip = {
			any_faction_backer = {
				faction = faction_regent_loyalists2
				letter_event = { id = japan.401 }
				diplomatic_immunity = no
			}
			letter_event = { id = japan.402 }
			diplomatic_immunity = no
		}
	}
	
	option = {
		name = EVTOPTB_JAPAN_100 # Never!
		if = {
			limit = {
				has_dlc = "Jade Dragon"
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
		ai_chance = {
			factor = 95
			modifier = {
				factor = 1.25
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.25
				trait = envious
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists2
					power = 1.5
				}
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists2
					power = 1.0
				}
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists2
					power = 2.0
				}
			}
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists
					power = 3.0
				}
			}	
			modifier = {
				factor = 2
				faction_power = {
					faction = faction_regent_loyalists2
					power = 4.0
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					faction_power = { faction = faction_regent_loyalists2 power = 1.0 }
				}
				random = {
					chance = 25
					character_event = { id = 45002 days = 120 } # Loyalists flock to the regent's banner
				}
			}
		}
		FROM = {
			letter_event = { id = japan.403 }
			hidden_tooltip = {
				if = {
					limit = {
						ROOT = {
							faction_power = { faction = faction_regent_loyalists2 power = 1.5 }
						}
					}
					random_list = {
						50 = {
						}
						30 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
				if = {
					limit = {
						ROOT = {
							faction_power = { faction = faction_regent_loyalists2 power = 0.75 }
							NOT = {
								faction_power = { faction = faction_regent_loyalists2 power = 1.5 }
							}
						}
					}
					random_list = {
						75 = {
						}
						5 = {
							character_event = { id = 45000 days = 17 } # A great number of rebels flock to the liege's banner
						}
						20 = {
							character_event = { id = 45004 days = 17 } # Rebels flock to the liege's banner
						}
					}
				}
			}
		}
	}
}

# Faction members are informed that the regent folded
letter_event = {
	id = japan.401
	desc = EVTDESC_JAPAN_401
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_401 # Really? We had your back!
	}
}

# The liege is informed that the regent folded
letter_event = {
	id = japan.402
	desc = EVTDESC_JAPAN_402
	
	show_from_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_402 # Assuming direct control!
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

# The liege is informed that the regent isn't folding
letter_event = {
	id = japan.403
	desc = EVTDESC_JAPAN_403
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			any_faction_backer = {
				faction = faction_regent_loyalists2
				reverse_opinion = {
					modifier = opinion_fought_for_regent
					who = FROM
					years = 20
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_403 # Then face me in battle!
		
		FROM = {
			faction_regent_loyalists2 = { # The target (title) of the faction
				reverse_war = {
					target = FROM
					casus_belli = end_regency_war_faction2
					faction = faction_regent_loyalists
				}
			}
		}
		
		clr_character_flag = overthrow_my_regent_decision_taken
	}
}

# on_startup regency setup (the first event sometimes gets... weird)
character_event = {
	id = japan.404
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		trait = japanese_regent2
		liege = {
			trait = under_regency2
		}
	}
	
	immediate = {
		liege = {
			random_vassal = {
				limit = {
					trait = japanese_regent2
				}
				liege = {
					regent = {
						remove_title = title_regent
					}
				}
				give_minor_title = title_regent
				give_minor_title = title_appointed_regent
			}
			primary_title = {
				save_event_target_as = regency_loyalist_title
			}
			regent = {
				if = {
					limit = {
						higher_tier_than = baron
					}
					start_faction = {
						faction = faction_regent_loyalists2
						title = event_target:regency_loyalist_title
					}
					save_event_target_as = regent_to_be_loyal_to
					if = {
						limit = {
							NOT = {
								dynasty = ROOT
							}
						}
						any_dynasty_member = {
							limit = {
								is_landed = yes
								higher_tier_than = baron
								liege = {
									character = ROOT
								}
								NOT = {
									has_non_aggression_pact_with = ROOT
								}
							}
							join_faction = {
								faction = faction_regent_loyalists2
								faction_leader = event_target:regent_to_be_loyal_to
								ignore_requirements = yes
							}
						}
					}
				}
			}
		}
	}
}

##### Anti-Minamoto/-Taira takeover

# If the Imperial Family loses the Chrysanthemum Throne, enable factioning
character_event = {
	id = japan.405
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		FROM = {
			title = k_chrysanthemum_throne
		}
		NOT = {
			dynasty = 1000027000 # The Imperial Family
		}
		NOT = {
			has_global_flag = imperial_family_deposed
		}
	}
	
	immediate = {
		set_global_flag = imperial_family_deposed
	}
}

##### Wako (Wokou) events - add cultural buildings + game rule + localization

# Low chance of a Yamato or Japanese island or coastal province swapping to Wako culture
province_event = {
	id = japan.406
	picture = GFX_evt_kraken
	border = GFX_event_normal_frame_war
	desc = EVTDESC_JAPAN_406
	
	trigger = {
		port = yes
		OR = {
			# In Japan or Korea
			region = world_japan
			region = custom_yezo
			region = world_japan_islands
			region = world_korea
		}
		OR = {
			culture = japanese
			culture = yamato
		}
		OR = {
			religion = shinto
			religion = buddhist
		}
	}
	
	mean_time_to_happen = {
		months = 900
		
		# Is not an island or "island"
		modifier = {
			factor = 5
			any_neighbor_province = {
				count = 2
				is_land = yes
			}
		}
		
		# Is really not an island
		modifier = {
			factor = 10
			any_neighbor_province = {
				is_land = yes
				port = no
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				culture = wako # More common if adjacent
			}
		}
	}
	
	option = {
		trigger = {
			owner = {
				NOT = {
					culture = wako
				}
			}
		}
		name = EVTOPTA_JAPAN_406 # Let's hope they behave...
		culture = wako
	}
	
	option = {
		trigger = {
			owner = {
				culture = wako
			}
		}
		name = EVTOPTB_JAPAN_406 # That's... good?
		culture = wako
	}
}

# Low chance of a Pirate Haven spawning in a Wako province
province_event = {
	id = japan.407
	picture = GFX_evt_kraken
	border = GFX_event_normal_frame_war
	desc = EVTDESC_JAPAN_407
	
	trigger = {
		port = yes
		OR = {
			# In Japan or Korea
			region = world_japan
			region = custom_yezo
			region = world_japan_islands
			region = world_korea
		}
		culture = wako
		OR = {
			religion = shinto
			religion = buddhist
		}
		NOT = {
			has_province_modifier = pirate_haven
		}
		owner = {
			NOR = {
				AND = {
					culture = wako
					independent = yes
				}
				top_liege = {
					culture = wako
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120
		
		# Is not an island or "island"
		modifier = {
			factor = 5
			any_neighbor_province = {
				count = 2
				is_land = yes
			}
		}
		
		# Is really not an island
		modifier = {
			factor = 10
			any_neighbor_province = {
				is_land = yes
				port = no
			}
		}
	}
	
	option = {
		name = EVTOPTA_JAPAN_407 # Let's hope they know not to raid my coasts!
		add_province_modifier = {
			modifier = pirate_haven
			duration = -1
		}
	}
}

# Pirate Haven modifier removed
province_event = {
	id = japan.408
	picture = GFX_evt_kraken
	border = GFX_event_normal_frame_war
	desc = EVTDESC_JAPAN_408
	
	trigger = {
		port = yes
		has_province_modifier = pirate_haven
	}
	
	mean_time_to_happen = {
		months = 240
		
		# Isn't a Wako province
		modifier = {
			factor = 0.1
			NAND = {
				culture = wako
				OR = {
					religion = shinto
					religion = buddhist
				}
			}
		}
		
		# Owner or liege is Wako
		modifier = {
			factor = 0.1
			owner = {
				OR = {
					culture = wako
					any_liege = {
						culture = wako
					}
				}
			}
		}
		
		# Owner has high stewardship
		modifier = {
			factor = 0.8
			owner = {
				stewardship = 12
			}
		}
		modifier = {
			factor = 0.8
			owner = {
				stewardship = 16
			}
		}
		modifier = {
			factor = 0.8
			owner = {
				stewardship = 20
			}
		}
		modifier = {
			factor = 0.8
			owner = {
				stewardship = 24
			}
		}
	}
	
	option = {
		trigger = {
			owner = {
				NOT = {
					culture = wako
				}
			}
		}
		name = EVTOPTA_JAPAN_408 # Good riddance!
		remove_province_modifier = pirate_haven
	}
	
	option = {
		trigger = {
			owner = {
				culture = wako
			}
		}
		name = EVTOPTB_JAPAN_408 # I can organize my own raids!
		remove_province_modifier = pirate_haven
	}
}

# Low chance of a Wako raid spawning in a province with a Pirate Haven
character_event = {
	id = japan.409
	picture = GFX_evt_kraken
	border = GFX_event_normal_frame_war
	desc = EVTDESC_JAPAN_409
	
	has_dlc = "Horse Lords" # Raiding adventurers
		
	trigger = {
		any_demesne_province = {
			culture = wako
			has_province_modifier = pirate_haven
		}
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	immediate = {
		random_demesne_province = {
			limit = {
				culture = wako
				has_province_modifier = pirate_haven
			}
			save_event_target_as = wako_province
			random_list = {
				95 = {
					create_character = {
						random_traits = yes
						age = 25
						female = no
						dynasty = none
						culture = wako
						religion = shinto
						attributes = {
							martial = 5
						}
						trait = tough_soldier
					}
				}
				5 = {
					create_character = {
						random_traits = yes
						age = 25
						female = yes
						dynasty = none
						culture = wako
						religion = shinto
						trait = pirate
						attributes = {
							martial = 5
						}
						trait = tough_soldier
					}
				}
			}
			new_character = {
				if = {
					limit = {
						has_dlc = "Holy Fury"
					}
					add_trait = pirate
				}
				# Pirate flavour
				random_list = {
					5 = {
						add_trait = one_legged
					}
					5 = {
						add_trait = one_eyed
					}
					5 = {
						add_trait = one_handed
					}
					5 = {
						add_trait = duelist
					}
					5 = {
						add_trait = scurvy
					}
					5 = {
						add_trait = drunkard
					}
					5 = {
						add_trait = hedonist
					}
					5 = {
						if = {
							limit = {
								is_female = yes
							}
							add_trait = seductress
						}
						else = {
							add_trait = seducer
						}
					}
					5 = {
						add_trait = falconer
					}
					5 = {
						add_trait = lustful
					}
					5 = {
						add_trait = greedy
					}
					5 = {
						add_trait = arbitrary
					}
					5 = {
						add_trait = deceitful
					}
					5 = {
						add_trait = envious
					}
					5 = {
						add_trait = brave
					}
					5 = {
						add_trait = cruel
					}
					5 = {
						add_trait = craven
					}
					5 = {
						add_trait = aggressive_leader
					}
					5 = {
						add_trait = inspiring_leader
					}
					5 = {
						add_trait = trickster
					}
				}
				random_list = {
					5 = {
						add_trait = one_legged
					}
					5 = {
						add_trait = one_eyed
					}
					5 = {
						add_trait = one_handed
					}
					5 = {
						add_trait = duelist
					}
					5 = {
						add_trait = scurvy
					}
					5 = {
						add_trait = drunkard
					}
					5 = {
						add_trait = hedonist
					}
					5 = {
						if = {
							limit = {
								is_female = yes
							}
							add_trait = seductress
						}
						else = {
							add_trait = seducer
						}
					}
					5 = {
						add_trait = falconer
					}
					5 = {
						add_trait = lustful
					}
					5 = {
						add_trait = greedy
					}
					5 = {
						add_trait = arbitrary
					}
					5 = {
						add_trait = deceitful
					}
					5 = {
						add_trait = envious
					}
					5 = {
						add_trait = brave
					}
					5 = {
						add_trait = cruel
					}
					5 = {
						add_trait = craven
					}
					5 = {
						add_trait = aggressive_leader
					}
					5 = {
						add_trait = inspiring_leader
					}
					5 = {
						add_trait = trickster
					}
				}
				random_list = {
					5 = {
						add_trait = one_legged
					}
					5 = {
						add_trait = one_eyed
					}
					5 = {
						add_trait = one_handed
					}
					5 = {
						add_trait = duelist
					}
					5 = {
						add_trait = scurvy
					}
					5 = {
						add_trait = drunkard
					}
					5 = {
						add_trait = hedonist
					}
					5 = {
						if = {
							limit = {
								is_female = yes
							}
							add_trait = seductress
						}
						else = {
							add_trait = seducer
						}
					}
					5 = {
						add_trait = falconer
					}
					5 = {
						add_trait = lustful
					}
					5 = {
						add_trait = greedy
					}
					5 = {
						add_trait = arbitrary
					}
					5 = {
						add_trait = deceitful
					}
					5 = {
						add_trait = envious
					}
					5 = {
						add_trait = brave
					}
					5 = {
						add_trait = cruel
					}
					5 = {
						add_trait = craven
					}
					5 = {
						add_trait = aggressive_leader
					}
					5 = {
						add_trait = inspiring_leader
					}
					5 = {
						add_trait = trickster
					}
				}
				save_event_target_as = wako_raider
				#set_character_flag = raiding_adventurer
				create_title = {
					tier = DUKE
					landless = yes
					adventurer = yes
					culture = ROOT
					name = "PIRATE_RAIDERS"
					holder = THIS
					base_title = THIS
				}
				# Create a fleet
				spawn_unit = {
					province = event_target:wako_province
					owner = event_target:wako_raider
					troops = {
						light_infantry = { 250 250 }
						archers = { 250 250 }
						heavy_infantry = { 50 50 }
						pikemen = { 50 50 }
					}
					attrition = 0
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					earmark = wako_raiders
				}
				spawn_fleet = {
					province = closest # closest sea zone
					owner = event_target:wako_raider
					troops = {
						galleys = { 10 10 }
					}
					cannot_inherit = yes
					earmark = wako_raiders
				}
				random = {
					chance = 25
					modifier = {
						factor = 2
						year = 1000
					}
					spawn_unit = {
						province = event_target:wako_province
						owner = event_target:wako_raider
						troops = {
							light_infantry = { 250 250 }
							archers = { 250 250 }
							heavy_infantry = { 50 50 }
							pikemen = { 50 50 }
						}
						attrition = 0
						reinforces = yes
						is_looter = yes
						can_toggle_looting = no
						cannot_inherit = yes
						earmark = wako_raiders
					}
					spawn_fleet = {
						province = closest # closest sea zone
						owner = event_target:wako_raider
						troops = {
							galleys = { 10 10 }
						}
						cannot_inherit = yes
						earmark = wako_raiders
					}
				}
				random = {
					chance = 5
					modifier = {
						factor = 2
						year = 1200
					}
					spawn_unit = {
						province = event_target:wako_province
						owner = event_target:wako_raider
						troops = {
							light_infantry = { 250 250 }
							archers = { 250 250 }
							heavy_infantry = { 50 50 }
							pikemen = { 50 50 }
						}
						attrition = 0
						reinforces = yes
						is_looter = yes
						can_toggle_looting = no
						cannot_inherit = yes
						earmark = wako_raiders
					}
					spawn_fleet = {
						province = closest # closest sea zone
						owner = event_target:wako_raider
						troops = {
							galleys = { 10 10 }
						}
						cannot_inherit = yes
						earmark = wako_raiders
					}
				}
				ROOT = {
					reverse_opinion = {
						who = event_target:wako_raider
						modifier = forbidden_raid_target
					}
					any_liege = {
						reverse_opinion = {
							who = event_target:wako_raider
							modifier = forbidden_raid_target
						}
					}
				}
				character_event = { id = japan.410 months = 120 random = 60 } # Stand down
			}
		}
	}
	
	option = {
		trigger = {
			owner = {
				NOT = {
					culture = wako
				}
			}
		}
		name = EVTOPTA_JAPAN_409 # Be gone!
	}
	
	option = {
		trigger = {
			owner = {
				culture = wako
			}
		}
		name = EVTOPTB_JAPAN_409 # I don't need them!
	}
}

# Raiders disband
character_event = {
	id = japan.410
	picture = GFX_evt_kraken
	border = GFX_event_normal_frame_war
	desc = EVTDESC_JAPAN_410
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_410 # I don't need them!
		
		any_demesne_title = {
			limit = {
				adventurer = yes
			}
			unsafe_destroy_landed_title = THIS
		}
	}
}

##### Succession meddling and nullifying - AI only since the player handles it with decisions

# Meddle - on_yearly_pulse
character_event = {
	id = japan.411
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		trait = japanese_regent
		has_minor_title = title_regent
		liege = {
			religion = shinto
			controls_religion = yes
			primary_title = {
				has_law = regent_succession_control_1
			}
		}
		prestige = 500
		has_regent = no
		ai = yes
	}
	
	immediate = {
		log = "[Root.GetBestName] might meddle in the Tenno's succession!"
		
		if = {
			limit = {
				NOT = {
					has_character_modifier = meddled_in_succession
				}
			}
			log = "[Root.GetBestName] has not already meddled!"
			set_character_flag = new_meddling
			
			# Try to figure out if we want to meddle
			
			set_variable = {
				which = meddling_desire
				value = 0
			}
			
			k_chrysanthemum_throne = {
				holder_scope = {
					current_heir = {
						save_event_target_as = current_chrysanthemum_throne_heir
						log = "The current heir to the Chrysanthemum Throne is [current_chrysanthemum_throne_heir.GetBestName]"
					}
					ROOT = {
						save_event_target_as = regent_or_tenno
					}
					any_dynasty_member = {
						limit = {
							religion = shinto # Vanilla is strict when it comes to religion and rel head succession, so we should probably be as strict in case there are issues...;;;;;;;;;;;;;x
							NOT = {
								trait = bastard
							}
							OR = { #Candidate should not be a landless Courtier that is about to inherit a Theocracy or Republic
								AND = {
									is_ruler = yes
									is_landed = yes
									is_republic = no
									is_merchant_republic = no
									is_theocracy = no
								}
								NOR = {
									any_heir_title = {
										is_republic = yes
									}
									any_heir_title = {
										is_merchant_republic = yes
									}
									any_heir_title = {
										is_theocracy = yes
									}
								}
							}
							NOR = {
								trait = cat
								trait = disinherited
								trait = horse
								trait = eunuch
								AND = { 
									trait = bastard 
									is_ruler = no
								}
								is_ascetic_trigger = yes
								is_theocracy = yes
								is_republic = yes
								is_merchant_republic = yes
							}
						}
						score_value = {
							value = 1
							tenno_succession_candidate_weight = yes # Find our preferred heir
						}
						save_event_target_as = preferred_chrysanthemum_throne_heir
						log = "The preferred heir to the Chrysanthemum Throne is [current_chrysanthemum_throne_heir.GetBestName]"
					}
				}
			}
			
			score_current_chrysanthemum_throne_heir_effect = yes
			log = "The current heir's score is [current_heir_score.GetValue]"

			##########################   Ruler's traits   ##########################
			# Only includes the negative ones; the Regent doesn't care for a great ruler
			# Ruler is lunatic, vote against his pick
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					NOR = {
						trait = lunatic #Don't care
						trait = possessed #Don't care
						trait = arbitrary #Don't care
						trait = zealous #Might be the gods speaking
					}
					k_chrysanthemum_throne = {
						holder_scope = {
							trait = lunatic
						} 
					}
				}
				change_variable = {
					which = current_heir_score
					value = -100
				}
			}
			#Ruler is possessed, vote against his pick
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					trait = zealous
					NOR = {
						trait = lunatic #Don't care
						trait = possessed #Don't care
						trait = arbitrary #Don't care
					}
					k_chrysanthemum_throne = {
						holder_scope = {
							trait = possessed
						} 
					}
				}
				change_variable = {
					which = current_heir_score
					value = -100
				}
			}
			#Ruler is a Tyrant (Opinion), vote against his pick
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					NOR = {
						trait = lunatic #Don't care
						trait = possessed #Don't care
						trait = arbitrary #Don't care
					}
					k_chrysanthemum_throne = {
						holder_scope = {
							ROOT = {
								has_opinion_modifier = {
									modifier = opinion_tyrant
									who = PREV
								} 
							} 
						} 
					}
				}
				change_variable = {
					which = current_heir_score
					value = -1000
				}
			}
			##########################   Raw Opinion bonus towards Ruler   ##########################
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = -75 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate
					which = current_heir_score
					value = -30
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = -50 } 
							} 
							reverse_opinion = { who = ROOT value = -75 } 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate
					which = current_heir_score
					value = -20
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = -25 } 
							} 
							reverse_opinion = { who = ROOT value = -50 } 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate (FROMFROMFROM)
					which = current_heir_score
					value = -10
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = 0 } 
							} 
							reverse_opinion = { who = ROOT value = -25 } 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate
					which = current_heir_score
					value = -5
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 0 } 
							NOT = { 
								reverse_opinion = { who = ROOT value = 25 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = current_heir_score
					value = 10
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 25 } 
							NOT = { 
								reverse_opinion = { who = ROOT value = 50 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = current_heir_score
					value = 20
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 50 } 
							NOT = { 
								reverse_opinion = { who = ROOT value = 75 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = current_heir_score
					value = 40
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 75 } 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = current_heir_score
					value = 60
				}
			}
			
			score_preferred_chrysanthemum_throne_heir_effect = yes
			log = "The preferred heir's score is"
			
			set_variable = {
				which = meddling_desire
				which = preferred_heir_score
			}
			subtract_variable = {
				which = meddling_desire
				which = current_heir_score
			}
			
			# Increase/decrease meddling willingness based on traits
			if = {
				limit = {
					trait = ambitious
				}
				change_variable = {
					which = meddling_desire
					value = 500
				}
			}
			if = {
				limit = {
					trait = proud
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = envious
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = deceitful
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = arbitrary
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = content
				}
				change_variable = {
					which = meddling_desire
					value = -250 # Not -500; you could be content with the current state of affairs!
				}
			}
			if = {
				limit = {
					trait = humble
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = kind
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = honest
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = just
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			
			# Rivalry/etc. with the Tenno
			if = {
				limit = {
					k_chrysanthemum_throne = {
						holder_scope = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = 1000
				}
			}
			if = {
				limit = {
					k_chrysanthemum_throne = {
						holder_scope = {
							any_friend = {
								character = ROOT
							}
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = -500
				}
			}
			if = {
				limit = {
					k_chrysanthemum_throne = {
						holder_scope = {
							any_lover = {
								character = ROOT
							}
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = -500
				}
			}
			
			log = "Meddling desire is [meddling_desire.GetValue]"
		}
		
		else = {
			log = "[Root.GetBestName] has already meddled!"
			
			# Determine if we wish to continue meddling; based on ROOT's traits
			
			set_variable = {
				which = meddling_desire
				value = 0
			}
			
			# Increase/decrease meddling willingness based on traits
			if = {
				limit = {
					trait = ambitious
				}
				change_variable = {
					which = meddling_desire
					value = 500
				}
			}
			if = {
				limit = {
					trait = proud
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = envious
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = deceitful
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = arbitrary
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = content
				}
				change_variable = {
					which = meddling_desire
					value = -250 # Not -500; you could be content with the current state of affairs!
				}
			}
			if = {
				limit = {
					trait = humble
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = kind
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = honest
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = just
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}

			##########################   Ruler's traits   ##########################
			# Only includes the negative ones; the Regent doesn't care for a great ruler
			# Ruler is lunatic, vote against his pick
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					NOR = {
						trait = lunatic #Don't care
						trait = possessed #Don't care
						trait = arbitrary #Don't care
						trait = zealous #Might be the gods speaking
					}
					k_chrysanthemum_throne = {
						holder_scope = {
							trait = lunatic
						} 
					}
				}
				change_variable = {
					which = meddling_desire
					value = 100
				}
			}
			#Ruler is possessed, vote against his pick
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					trait = zealous
					NOR = {
						trait = lunatic #Don't care
						trait = possessed #Don't care
						trait = arbitrary #Don't care
					}
					k_chrysanthemum_throne = {
						holder_scope = {
							trait = possessed
						} 
					}
				}
				change_variable = {
					which = meddling_desire
					value = 100
				}
			}
			#Ruler is a Tyrant (Opinion), vote against his pick
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					NOR = {
						trait = lunatic #Don't care
						trait = possessed #Don't care
						trait = arbitrary #Don't care
					}
					k_chrysanthemum_throne = {
						holder_scope = {
							ROOT = {
								has_opinion_modifier = {
									modifier = opinion_tyrant
									who = PREV
								} 
							} 
						} 
					}
				}
				change_variable = {
					which = meddling_desire
					value = 1000
				}
			}
			##########################   Raw Opinion bonus towards Ruler   ##########################
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = -75 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate
					which = meddling_desire
					value = 30
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = -50 } 
							} 
							reverse_opinion = { who = ROOT value = -75 } 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate
					which = meddling_desire
					value = 20
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = -25 } 
							} 
							reverse_opinion = { who = ROOT value = -50 } 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate (FROMFROMFROM)
					which = meddling_desire
					value = 10
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							NOT = { 
								reverse_opinion = { who = ROOT value = 0 } 
							} 
							reverse_opinion = { who = ROOT value = -25 } 
						} 
					}
				}
				change_variable = { #Vassal hates ruler, therefore votes against the ruler's candidate
					which = meddling_desire
					value = 5
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 0 } 
							NOT = { 
								reverse_opinion = { who = ROOT value = 25 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = meddling_desire
					value = -10
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 25 } 
							NOT = { 
								reverse_opinion = { who = ROOT value = 50 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = meddling_desire
					value = -20
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 50 } 
							NOT = { 
								reverse_opinion = { who = ROOT value = 75 } 
							} 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = meddling_desire
					value = -40
				}
			}
			if = {
				limit = {
					NOT = { character = event_target:current_chrysanthemum_throne_heir } #But not if it's me.
					k_chrysanthemum_throne = {
						holder_scope = {
							NOT = { character = ROOT } #Of course you trust your own opinion of your candidate...
							reverse_opinion = { who = ROOT value = 75 } 
						} 
					}
				}
				change_variable = { #Vassal loves ruler, therefore votes for the ruler's candidate
					which = meddling_desire
					value = -60
				}
			}
			
			# Rivalry/etc. with the Tenno
			if = {
				limit = {
					k_chrysanthemum_throne = {
						holder_scope = {
							any_rival = {
								character = ROOT
							}
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = 1000
				}
			}
			if = {
				limit = {
					k_chrysanthemum_throne = {
						holder_scope = {
							any_friend = {
								character = ROOT
							}
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = -500
				}
			}
			if = {
				limit = {
					k_chrysanthemum_throne = {
						holder_scope = {
							any_lover = {
								character = ROOT
							}
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = -500
				}
			}
			
			log = "Meddling desire is [meddling_desire.GetValue]"
		}
		
		# And determine if there is meddling
		if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 1000
				}
			}
			remove_character_modifier = meddled_in_succession
			if = {
				limit = {
					has_character_flag = new_meddling
				}
				event_target:current_chrysanthemum_throne_heir = {
					opinion = {
						who = ROOT
						modifier = opinion_opposing_my_claim
					}
				}
				event_target:preferred_chrysanthemum_throne_heir = {
					opinion = {
						who = ROOT
						modifier = opinion_backing_my_claim
					}
				}
				liege = {
					opinion = {
						who = ROOT
						modifier = opinion_opposing_my_preferred_heir
					}
				}
			}
			add_character_modifier = {
				modifier = meddled_in_succession
				days = 730
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 900
				}
			}
			random_list = {
				90 = {
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				10 = {
					modifier = {
						factor = 0
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 800
				}
			}
			random_list = {
				80 = {
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				20 = {
					modifier = {
						factor = 0
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 700
				}
			}
			random_list = {
				70 = {
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				30 = {
					modifier = {
						factor = 0
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 600
				}
			}
			random_list = {
				60 = {
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				40 = {
					modifier = {
						factor = 0
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 500
				}
			}
			random_list = {
				50 = {
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				50 = {
					modifier = {
						factor = 0
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 400
				}
			}
			random_list = {
				40 = {
					modifier = {
						factor = 2
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				60 = {
					modifier = {
						factor = 0.35
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 300
				}
			}
			random_list = {
				30 = {
					modifier = {
						factor = 2
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				70 = {
					modifier = {
						factor = 0.6
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 200
				}
			}
			random_list = {
				20 = {
					modifier = {
						factor = 2.5
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				80 = {
					modifier = {
						factor = 0.625
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 100
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 4
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				90 = {
					modifier = {
						factor = 0.6
						trait = ambitious
					}
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = 0
				}
			}
			random_list = {
				30 = {
					modifier = {
						factor = 0
						NOT = {
							trait = ambitious
						}
					}
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				70 = {
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = -250
				}
			}
			random_list = {
				20 = {
					modifier = {
						factor = 0
						NOT = {
							trait = ambitious
						}
					}
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				80 = {
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = meddling_desire
					value = -500
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						NOT = {
							trait = ambitious
						}
					}
					remove_character_modifier = meddled_in_succession
					if = {
						limit = {
							has_character_flag = new_meddling
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						liege = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
					}
					add_character_modifier = {
						modifier = meddled_in_succession
						days = 730
					}
				}
				90 = {
					remove_character_modifier = meddled_in_succession
				}
			}
		}
		else = {
			remove_character_modifier = meddled_in_succession
		}
		
		if = {
			limit = {
				has_character_modifier = meddled_in_succession
			}
			log = "There's meddling!"
			if = {
				limit = {
					has_character_flag = new_meddling
				}
				prestige = -500
				clr_character_flag = new_meddling
			}
			else = {
				prestige = -100
			}
			k_chrysanthemum_throne = {
				holder_scope = {
					recalc_succession = yes
					character_event = { id = japan.412 } # Inform the Tenno!
				}
			}
		}
		else = {
			log = "There's no meddling!"
		}
		clr_character_flag = new_meddling
	}
}

# Meddled - inform the Tenno!
character_event = {
	id = japan.412
	desc = EVTDESC_JAPAN_412
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_412 # FROM dares?
		
		if = {
			limit = {
				FROM = {
					has_dlc = "Jade Dragon"
					is_chinese_emperor_trigger = no
				}
			}
			if = {
				limit = {
					is_chinese_emperor_trigger = yes
				}
				FROM = {
					detract_grace_super_huge_effect = yes
				}
			}
			else_if = {
				limit = {
					any_close_relative = {
						dynasty = PREV
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_massive_effect = yes
				}
			}
			else_if = {
				limit = {
					any_dynasty_member = {
						is_chinese_emperor_trigger = yes
					}
				}
				FROM = {
					detract_grace_major_effect = yes
				}
			}
		}
	}
}

# Nullify - on_yearly_pulse
character_event = {
	id = japan.413
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	religion = shinto
	
	trigger = {
		controls_religion = yes
		prestige = 500
		has_actual_regency_trigger = no
		trait = under_regency
		regent = {
			trait = japanese_regent
		}
		primary_title = {
			has_law = regent_succession_control_1
		}
		ai = yes
	}
	
	immediate = {
		if = {
			limit = {
				regent = {
					trait = japanese_regent
					has_character_modifier = meddled_in_succession
				}
			}
			
			log = "The Tenno, [Root.GetBestName], might try to nullify meddling!"
			
			# Try to figure out if we want to nullify
			
			set_variable = {
				which = meddling_desire
				value = 0
			}
			
			k_chrysanthemum_throne = {
				holder_scope = {
					current_heir = {
						save_event_target_as = current_chrysanthemum_throne_heir
						log = "The current heir to the Chrysanthemum Throne is [current_chrysanthemum_throne_heir.GetBestName]"
					}
					ROOT = {
						save_event_target_as = regent_or_tenno
					}
					any_dynasty_member = {
						limit = {
							religion = shinto # Vanilla is strict when it comes to religion and rel head succession, so we should probably be as strict in case there are issues...;;;;;;;;;;;;;x
							NOT = {
								trait = bastard
							}
							OR = { #Candidate should not be a landless Courtier that is about to inherit a Theocracy or Republic
								AND = {
									is_ruler = yes
									is_landed = yes
									is_republic = no
									is_merchant_republic = no
									is_theocracy = no
								}
								NOR = {
									any_heir_title = {
										is_republic = yes
									}
									any_heir_title = {
										is_merchant_republic = yes
									}
									any_heir_title = {
										is_theocracy = yes
									}
								}
							}
							NOR = {
								trait = cat
								trait = disinherited
								trait = horse
								trait = eunuch
								AND = { 
									trait = bastard 
									is_ruler = no
								}
								is_ascetic_trigger = yes
								is_theocracy = yes
								is_republic = yes
								is_merchant_republic = yes
							}
						}
						score_value = {
							value = 1
							tenno_succession_candidate_weight = yes # Find our preferred heir
						}
						save_event_target_as = preferred_chrysanthemum_throne_heir
						log = "The preferred heir to the Chrysanthemum Throne is [current_chrysanthemum_throne_heir.GetBestName]"
					}
				}
			}
			
			score_current_chrysanthemum_throne_heir_effect = yes
			log = "The current heir's score is [current_heir_score.GetValue]"
			
			# No need to check what you think of the Tenno; you ARE the Tenno!
			
			score_preferred_chrysanthemum_throne_heir_effect = yes
			log = "The preferred heir's score is [current_heir_score.GetValue]"
			
			set_variable = {
				which = meddling_desire
				which = preferred_heir_score
			}
			subtract_variable = {
				which = meddling_desire
				which = current_heir_score
			}
			
			# Increase/decrease meddling willingness based on traits
			if = {
				limit = {
					trait = ambitious
				}
				change_variable = {
					which = meddling_desire
					value = 500
				}
			}
			if = {
				limit = {
					trait = proud
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = envious
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = deceitful
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = arbitrary
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = content
				}
				change_variable = {
					which = meddling_desire
					value = -250 # Not -500; you could be content with the current state of affairs!
				}
			}
			if = {
				limit = {
					trait = humble
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = kind
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = honest
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = just
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			
			# Rivalry with the Regent
			if = {
				limit = {
					regent = {
						any_rival = {
							character = ROOT
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = 1000
				}
			}
			
			log = "Meddling desire is [meddling_desire.GetValue]"
		
			# And determine if there is meddling
			if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 1000
					}
				}
				event_target:current_chrysanthemum_throne_heir = {
					opinion = {
						who = ROOT
						modifier = opinion_opposing_my_claim
					}
				}
				event_target:preferred_chrysanthemum_throne_heir = {
					opinion = {
						who = ROOT
						modifier = opinion_backing_my_claim
					}
				}
				regent = {
					opinion = {
						who = ROOT
						modifier = opinion_opposing_my_preferred_heir
					}
				}
				regent = {
					remove_character_modifier = meddled_in_succession
				}
				set_character_flag = nullifed_meddling
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 900
					}
				}
				random_list = {
					90 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					10 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 800
					}
				}
				random_list = {
					80 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					20 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 700
					}
				}
				random_list = {
					70 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					30 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 600
					}
				}
				random_list = {
					60 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					40 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 500
					}
				}
				random_list = {
					50 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					50 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 400
					}
				}
				random_list = {
					40 = {
						modifier = {
							factor = 2
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					60 = {
						modifier = {
							factor = 0.35
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 300
					}
				}
				random_list = {
					30 = {
						modifier = {
							factor = 2
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					70 = {
						modifier = {
							factor = 0.6
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 200
					}
				}
				random_list = {
					20 = {
						modifier = {
							factor = 2.5
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					80 = {
						modifier = {
							factor = 0.625
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 100
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 4
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					90 = {
						modifier = {
							factor = 0.6
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 0
					}
				}
				random_list = {
					30 = {
						modifier = {
							factor = 0
							NOT = {
								trait = ambitious
							}
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					70 = {
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = -250
					}
				}
				random_list = {
					20 = {
						modifier = {
							factor = 0
							NOT = {
								trait = ambitious
							}
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					80 = {
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = -500
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							NOT = {
								trait = ambitious
							}
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					90 = {
					}
				}
			}
			
			if = {
				limit = {
					has_character_flag = nullifed_meddling
				}
				clr_character_flag = nullifed_meddling
				log = "There's nullifying!"
				prestige = -500
				recalc_succession = yes
				regent = {
					character_event = { id = japan.414 } # Inform the regent!
				}
			}
			else = {
				log = "There's no nullifying!"
			}
		}
	}
}

# Nullified - inform the Regent!
character_event = {
	id = japan.414
	desc = EVTDESC_JAPAN_414
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_414 # FROM dares?
	}
}

# Nullify - on_death (also fires for the player to set up trait inheritance, but the player doesn't automatically counter-meddle)
character_event = {
	id = japan.415
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	religion = shinto
	
	trigger = {
		controls_religion = yes
		trait = under_regency
	}
	
	immediate = {
		if = {
			limit = {
				ai = yes
				regent = {
					trait = japanese_regent
					has_character_modifier = meddled_in_succession
				}
				primary_title = {
					has_law = regent_succession_control_1
				}
				regent = {
					trait = japanese_regent
				}
				prestige = 500
				has_actual_regency_trigger = no
			}
			
			log = "The Tenno, [Root.GetBestName], might try to nullify meddling!"
			
			# Try to figure out if we want to nullify
			
			set_variable = {
				which = meddling_desire
				value = 0
			}
			
			k_chrysanthemum_throne = {
				holder_scope = {
					current_heir = {
						save_event_target_as = current_chrysanthemum_throne_heir
						log = "The current heir to the Chrysanthemum Throne is [current_chrysanthemum_throne_heir.GetBestName]"
					}
					ROOT = {
						save_event_target_as = regent_or_tenno
					}
					any_dynasty_member = {
						limit = {
							religion = shinto # Vanilla is strict when it comes to religion and rel head succession, so we should probably be as strict in case there are issues...;;;;;;;;;;;;;x
							NOT = {
								trait = bastard
							}
							OR = { #Candidate should not be a landless Courtier that is about to inherit a Theocracy or Republic
								AND = {
									is_ruler = yes
									is_landed = yes
									is_republic = no
									is_merchant_republic = no
									is_theocracy = no
								}
								NOR = {
									any_heir_title = {
										is_republic = yes
									}
									any_heir_title = {
										is_merchant_republic = yes
									}
									any_heir_title = {
										is_theocracy = yes
									}
								}
							}
							NOR = {
								trait = cat
								trait = disinherited
								trait = horse
								trait = eunuch
								AND = { 
									trait = bastard 
									is_ruler = no
								}
								is_ascetic_trigger = yes
								is_theocracy = yes
								is_republic = yes
								is_merchant_republic = yes
							}
						}
						score_value = {
							value = 1
							tenno_succession_candidate_weight = yes # Find our preferred heir
						}
						save_event_target_as = preferred_chrysanthemum_throne_heir
						log = "The preferred heir to the Chrysanthemum Throne is [current_chrysanthemum_throne_heir.GetBestName]"
					}
				}
			}
			
			score_current_chrysanthemum_throne_heir_effect = yes
			log = "The current heir's score is [current_heir_score.GetValue]"
			
			# No need to check what you think of the Tenno; you ARE the Tenno!
			
			score_preferred_chrysanthemum_throne_heir_effect = yes
			log = "The preferred heir's score is [current_heir_score.GetValue]"
			
			set_variable = {
				which = meddling_desire
				which = preferred_heir_score
			}
			subtract_variable = {
				which = meddling_desire
				which = current_heir_score
			}
			
			# Increase/decrease meddling willingness based on traits
			if = {
				limit = {
					trait = ambitious
				}
				change_variable = {
					which = meddling_desire
					value = 500
				}
			}
			if = {
				limit = {
					trait = proud
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = envious
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = deceitful
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = arbitrary
				}
				change_variable = {
					which = meddling_desire
					value = 250
				}
			}
			if = {
				limit = {
					trait = content
				}
				change_variable = {
					which = meddling_desire
					value = -250 # Not -500; you could be content with the current state of affairs!
				}
			}
			if = {
				limit = {
					trait = humble
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = kind
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = honest
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			if = {
				limit = {
					trait = just
				}
				change_variable = {
					which = meddling_desire
					value = -250
				}
			}
			
			# Rivalry with the Regent
			if = {
				limit = {
					regent = {
						any_rival = {
							character = ROOT
						}
					}
				}
				change_variable = {
					which = meddling_desire
					value = 1000
				}
			}
			
			log = "Meddling desire is [meddling_desire.GetValue]"
		
			# And determine if there is meddling
			if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 1000
					}
				}
				event_target:current_chrysanthemum_throne_heir = {
					opinion = {
						who = ROOT
						modifier = opinion_opposing_my_claim
					}
				}
				event_target:preferred_chrysanthemum_throne_heir = {
					opinion = {
						who = ROOT
						modifier = opinion_backing_my_claim
					}
				}
				regent = {
					opinion = {
						who = ROOT
						modifier = opinion_opposing_my_preferred_heir
					}
				}
				regent = {
					remove_character_modifier = meddled_in_succession
				}
				set_character_flag = nullifed_meddling
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 900
					}
				}
				random_list = {
					90 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					10 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 800
					}
				}
				random_list = {
					80 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					20 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 700
					}
				}
				random_list = {
					70 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					30 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 600
					}
				}
				random_list = {
					60 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					40 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 500
					}
				}
				random_list = {
					50 = {
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					50 = {
						modifier = {
							factor = 0
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 400
					}
				}
				random_list = {
					40 = {
						modifier = {
							factor = 2
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					60 = {
						modifier = {
							factor = 0.35
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 300
					}
				}
				random_list = {
					30 = {
						modifier = {
							factor = 2
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					70 = {
						modifier = {
							factor = 0.6
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 200
					}
				}
				random_list = {
					20 = {
						modifier = {
							factor = 2.5
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					80 = {
						modifier = {
							factor = 0.625
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 100
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 4
							trait = ambitious
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					90 = {
						modifier = {
							factor = 0.6
							trait = ambitious
						}
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = 0
					}
				}
				random_list = {
					30 = {
						modifier = {
							factor = 0
							NOT = {
								trait = ambitious
							}
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					70 = {
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = -250
					}
				}
				random_list = {
					20 = {
						modifier = {
							factor = 0
							NOT = {
								trait = ambitious
							}
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					80 = {
					}
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = meddling_desire
						value = -500
					}
				}
				random_list = {
					10 = {
						modifier = {
							factor = 0
							NOT = {
								trait = ambitious
							}
						}
						event_target:current_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_claim
							}
						}
						event_target:preferred_chrysanthemum_throne_heir = {
							opinion = {
								who = ROOT
								modifier = opinion_backing_my_claim
							}
						}
						regent = {
							opinion = {
								who = ROOT
								modifier = opinion_opposing_my_preferred_heir
							}
						}
						regent = {
							remove_character_modifier = meddled_in_succession
						}
						set_character_flag = nullifed_meddling
					}
					90 = {
					}
				}
			}
			
			if = {
				limit = {
					has_character_flag = nullifed_meddling
				}
				clr_character_flag = nullifed_meddling
				log = "There's nullifying!"
				prestige = -500
				recalc_succession = yes
				regent = {
					character_event = { id = japan.414 } # Inform the regent!
				}
			}
			else = {
				log = "There's no nullifying!"
			}
		}
		
		current_heir = {
			add_trait = under_regency
		}
	}
}

# Inheritance of under_regency2
character_event = {
	id = japan.416
	hide_window = yes
	
	is_triggered_only = yes
	only_playable = yes
	
	trigger = {
		tier = emperor
		trait = under_regency2
	}
	
	immediate = {
		current_heir = {
			if = {
				limit = {
					NOT = {
						religion = shinto
						controls_religion = yes
					}
				}
				add_trait = under_regency2
			}
		}
	}
}

# Inheritance of japanese_regent
character_event = {
	id = japan.417
	hide_window = yes
	
	is_triggered_only = yes
	only_playable = yes
	
	trigger = {
		trait = japanese_regent
	}
	
	immediate = {
		current_heir = {
			if = {
				limit = {
					NOT = {
						religion = shinto
						controls_religion = yes
					}
				}
				add_trait = japanese_regent
			}
		}
	}
}

# Inheritance of japanese_regent2
character_event = {
	id = japan.418
	hide_window = yes
	
	is_triggered_only = yes
	only_playable = yes
	
	trigger = {
		trait = japanese_regent2
	}
	
	immediate = {
		current_heir = {
			if = {
				limit = {
					NOT = {
						religion = shinto
						controls_religion = yes
					}
				}
				add_trait = japanese_regent2
			}
			# Else: Execute Order 66?
		}
	}
}

### Regency power increase/decrease

# Increase - inform the liege
character_event = {
	id = japan.419
	desc = EVTDESC_JAPAN_419
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_419 # FROM dares?
	}
}

# Decrease - inform the Regent
character_event = {
	id = japan.420
	desc = EVTDESC_JAPAN_420
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_420 # FROM dares?
	}
}

### Regent prisoner release

# Inform the liege that a prisoner was released
character_event = {
	id = japan.421
	desc = EVTDESC_JAPAN_421
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_421 # FROMFROM dares?
		opinion = {
			who = FROMFROM
			modifier = released_a_prisoner
		}
	}
}

# Ping the Regent, then release the prisoner
character_event = {
	id = japan.422
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = { id = 153 } # Release the prisoner!
		}
	}
}

### Regent prisoner execution

# Inform the liege that a prisoner was executed
character_event = {
	id = japan.423
	desc = EVTDESC_JAPAN_423
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_423 # FROMFROM dares?
		opinion = {
			who = FROMFROM
			modifier = executed_a_prisoner
		}
	}
}

# Ping the Regent, then execute the prisoner
character_event = {
	id = japan.424
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = { id = 154 } # Execute the prisoner!
		}
	}
}


### Regent money transfer

# Inform the liege
character_event = {
	id = japan.425
	desc = EVTDESC_JAPAN_425
	picture = GFX_evt_china_golden_age # Needs better picture!
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JAPAN_425 # FROM dares?
		opinion = {
			who = FROM
			modifier = took_money
		}
	}
}