# Misc extra events for JD (mainly pings for the EoC)

namespace = jdextra

##### jd_chinese_diplomacy_events extra events

### Chinese noble

# Inform the EoC that the escaped noble was turned over
letter_event = {
	id = jdextra.1
	desc = EVTDESC_JDEXTRA_1
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JDEXTRA_1 # Good!
		opinion = {
			who = FROM
			modifier = china_agreed_to_request
		}
	}
}

# Inform the EoC that the escaped noble wasn't turned over
letter_event = {
	id = jdextra.2
	desc = EVTDESC_JDEXTRA_2
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JDEXTRA_2 # I will remember this!
		opinion = {
			who = FROM
			modifier = china_refused_request
		}
	}
	
	option = {
		trigger = {
			intrigue = 12
		}
		name = EVTOPTB_JDEXTRA_2 # Assassinate the noble!
		opinion = {
			who = FROM
			modifier = china_refused_request
		}
		
		FROM = {
			character_event = { id = JD.70009 days = 30}
		}
		
		wealth = -100
		
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				trait = greedy
			}
		}
	}
}

# Inform the EoC that the noble showed up in FROM's court and that FROM is prepared to hand them over
letter_event = {
	id = jdextra.3
	desc = EVTDESC_JDEXTRA_3
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JDEXTRA_3 # Good!
		opinion = {
			who = FROM
			modifier = china_informed_about_noble
		}
	}
}

# Inform the EoC that the noble escaped before your men arrived
letter_event = {
	id = jdextra.4
	desc = EVTDESC_JDEXTRA_4
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_JDEXTRA_4 # This is FROM's fault!
		opinion = {
			who = FROM
			modifier = china_noble_escaped
		}
	}
}




##### Misc

### Cleanup of Scholar-Bureaucrat modifier

# on_death event cleaning up modifiers
character_event = {
	id = jdextra.5
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		any_liege = {
			limit = {
				NOT = {
					any_courtier_or_vassal = {
						has_minor_title = title_administrator
						NOT = {
							character = ROOT
						}
					}
				}
			}
			remove_character_modifier = employing_jd_administrator
    	}
	}
}