# Chuseok events
# By Silverswee(e)per
# Partially based on earlier work by Okawoa

namespace = chuseok

##### Preparation

# Preparations begin
character_event = {
	id = chuseok.1
	desc = EVTDESC_CHUSEOK_1
	picture = GFX_evt_emissary # TODO
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	# TODO: Flag cleanup
	
	option = {
		name = EVTOPTA_CHUSEOK_1 # Let's get to it!
		
		hidden_tooltip = {
			random_list = {
				50 = {
					character_event = { id = chuseok.2 days = 2 } # Tend to tombs?
				}
				50 = {
					character_event = { id = chuseok.3 days = 2 } # Leave offerings to ancestors?
				}
			}
			character_event = { id = chuseok.4 days = 4 } # Prepare Songpyeon?
			random_list = {
				50 = {
					character_event = { id = chuseok.5 days = 6 } # Prepare Hangwa?
				}
				50 = {
					character_event = { id = chuseok.6 days = 6 } # Prepare drinks?
				}
			}
			character_event = { id = chuseok.7 days = 8 } # General food preparations
			character_event = { id = chuseok.8 days = 10 } # Invitations
		}
	}
}

# Help locals tend to tombs?
character_event = {
	id = chuseok.2
	desc = EVTDESC_CHUSEOK_2
	picture = GFX_evt_emissary # TODO
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		has_character_modifier = chuseok_in_progress
	}
	
	option = {
		name = EVTOPTA_CHUSEOK_2 # I will make every effort to help!
		
		piety = 25
		if = {
			limit = {
				lifestyle_traits < 1
				is_adult = yes
			}
			random = {
				chance = 5
				add_trait = gardener
			}
		}
		if = {
			limit = {
				trait = slothful
			}
			remove_trait = slothful
		}
		else_if = {
			limit = {
				NOT = {
					trait = diligent
				}
			}
			random = {
				chance = 15
				add_trait = diligent
			}
		}
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else_if = {
			limit = {
				NOT = {
					trait = zealous
				}
			}
			random = {
				chance = 15
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOR = {
					trait = diligent
					trait = gardener
				}
			}
			modifier = {
				factor = 0.1
				trait = cynical
				OR = {
					trait = diligent
					trait = gardener
				}
			}
			modifier = {
				factor = 0.1
				trait = slothful
				OR = {
					trait = zealous
					trait = gardener
				}
			}
			modifier = {
				factor = 0
				trait = slothful
				NOR = {
					trait = zealous
					trait = gardener
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_2 # I will do what's required...
		
		piety = 10
		
		if = {
			limit = {
				trait = slothful
			}
			remove_trait = slothful
		}
		else_if = {
			limit = {
				NOT = {
					trait = diligent
				}
			}
			random = {
				chance = 15
				add_trait = diligent
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOR = {
					trait = diligent
					trait = gardener
				}
			}
			modifier = {
				factor = 0.1
				trait = cynical
				OR = {
					trait = diligent
					trait = gardener
				}
			}
			modifier = {
				factor = 0.1
				trait = slothful
				OR = {
					trait = zealous
					trait = gardener
				}
			}
			modifier = {
				factor = 0
				trait = slothful
				NOR = {
					trait = zealous
					trait = gardener
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_2 # I can send some servants...
		
		piety = -5
		wealth = -5
		
		if = {
			limit = {
				trait = diligent
			}
			remove_trait = diligent
		}
		else_if = {
			limit = {
				NOT = {
					trait = slothful
				}
			}
			random = {
				chance = 15
				add_trait = slothful
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = zealous
				NOT = {
					trait = slothful
				}
			}
			modifier = {
				factor = 0
				trait = diligent
				NOT = {
					trait = cynical
				}
			}
		}
	}
	
	option = {
		name = EVTOPTD_CHUSEOK_2 # Why bother?
		
		piety = -10
		
		if = {
			limit = {
				trait = zealous
			}
			remove_trait = zealous
		}
		else_if = {
			limit = {
				NOT = {
					trait = cynical
				}
			}
			random = {
				chance = 15
				add_trait = cynical
			}
		}
		if = {
			limit = {
				trait = diligent
			}
			remove_trait = diligent
		}
		else_if = {
			limit = {
				NOT = {
					trait = slothful
				}
			}
			random = {
				chance = 15
				add_trait = slothful
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = diligent
				NOT = {
					trait = cynical
				}
			}
		}
	}
}

# Leave offerings to ancestors?
character_event = {
	id = chuseok.3
	desc = EVTDESC_CHUSEOK_3
	picture = GFX_evt_emissary # TODO
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		has_character_modifier = chuseok_in_progress
	}
	
	option = {
		name = EVTOPTA_CHUSEOK_3 # Grand offerings shall be made!
		
		piety = 25
		wealth = -10
		
		if = {
			limit = {
				trait = greedy
			}
			remove_trait = greedy
		}
		else_if = {
			limit = {
				NOT = {
					trait = charitable
				}
			}
			random = {
				chance = 15
				add_trait = charitable
			}
		}
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else_if = {
			limit = {
				NOT = {
					trait = zealous
				}
			}
			random = {
				chance = 15
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOT = {
					trait = charitable
				}
			}
			modifier = {
				factor = 0.1
				trait = cynical
				trait = charitable
			}
			modifier = {
				factor = 0.1
				trait = greedy
				trait = zealous
			}
			modifier = {
				factor = 0
				trait = greedy
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_3 # A small offering would be worthwhile...
		
		piety = 10
		wealth = -5
		
		if = {
			limit = {
				trait = greedy
			}
			remove_trait = greedy
		}
		else_if = {
			limit = {
				NOT = {
					trait = charitable
				}
			}
			random = {
				chance = 15
				add_trait = charitable
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOT = {
					trait = charitable
				}
			}
			modifier = {
				factor = 0.1
				trait = cynical
				trait = charitable
			}
			modifier = {
				factor = 0.1
				trait = greedy
				trait = zealous
			}
			modifier = {
				factor = 0
				trait = greedy
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_3 # Why bother?
		
		piety = -10
		
		if = {
			limit = {
				trait = zealous
			}
			remove_trait = zealous
		}
		else_if = {
			limit = {
				NOT = {
					trait = cynical
				}
			}
			random = {
				chance = 15
				add_trait = cynical
			}
		}
		if = {
			limit = {
				trait = charitable
			}
			remove_trait = charitable
		}
		else_if = {
			limit = {
				NOT = {
					trait = greedy
				}
			}
			random = {
				chance = 15
				add_trait = greedy
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = charitable
				NOT = {
					trait = cynical
				}
			}
		}
	}
}

# Prepare Songpyeon for everyone?
character_event = {
	id = chuseok.4
	desc = EVTDESC_CHUSEOK_4
	picture = GFX_evt_emissary # TODO
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		has_character_modifier = chuseok_in_progress
	}
	
	option = {
		name = EVTOPTA_CHUSEOK_4 # I will prepare quite a few extra!
		
		set_character_flag = chuseok_extra_songpyeon
		
		piety = 25
		wealth = -10
		
		if = {
			limit = {
				trait = temperate
			}
			remove_trait = temperate
		}
		else_if = {
			limit = {
				NOT = {
					trait = gluttonous
				}
			}
			random = {
				chance = 15
				add_trait = gluttonous
			}
		}
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else_if = {
			limit = {
				NOT = {
					trait = zealous
				}
			}
			random = {
				chance = 15
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOT = {
					trait = gluttonous
				}
			}
			modifier = {
				factor = 0.1
				trait = cynical
				trait = gluttonous
			}
			modifier = {
				factor = 0.1
				trait = temperate
				trait = zealous
			}
			modifier = {
				factor = 0
				trait = temperate
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_4 # Prepare enough for everyone!
		
		set_character_flag = chuseok_enough_songpyeon
		
		piety = 10
		wealth = -5
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOT = {
					trait = gluttonous
				}
			}
			modifier = {
				factor = 0.1
				trait = gluttonous
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = temperate
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_4 # Why bother?
		
		set_character_flag = chuseok_no_songpyeon
		
		piety = -10
		
		if = {
			limit = {
				trait = gluttonous
			}
			remove_trait = gluttonous
		}
		else_if = {
			limit = {
				NOT = {
					trait = temperate
				}
			}
			random = {
				chance = 15
				add_trait = temperate
			}
		}
		if = {
			limit = {
				trait = zealous
			}
			remove_trait = zealous
		}
		else_if = {
			limit = {
				NOT = {
					trait = cynical
				}
			}
			random = {
				chance = 15
				add_trait = cynical
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = gluttonous
				NOT = {
					trait = cynical
				}
			}
		}
	}
}

# Prepare Hangwa for everyone?
character_event = {
	id = chuseok.5
	desc = EVTDESC_CHUSEOK_5
	picture = GFX_evt_emissary # TODO
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		has_character_modifier = chuseok_in_progress
	}
	
	option = {
		name = EVTOPTA_CHUSEOK_5 # I will prepare quite a few extra!
		
		set_character_flag = chuseok_extra_hangwa
		
		piety = 25
		wealth = -10
		
		if = {
			limit = {
				trait = temperate
			}
			remove_trait = temperate
		}
		else_if = {
			limit = {
				NOT = {
					trait = gluttonous
				}
			}
			random = {
				chance = 15
				add_trait = gluttonous
			}
		}
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else_if = {
			limit = {
				NOT = {
					trait = zealous
				}
			}
			random = {
				chance = 15
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOT = {
					trait = gluttonous
				}
			}
			modifier = {
				factor = 0.1
				trait = cynical
				trait = gluttonous
			}
			modifier = {
				factor = 0.1
				trait = temperate
				trait = zealous
			}
			modifier = {
				factor = 0
				trait = temperate
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_5 # Prepare enough for everyone!
		
		set_character_flag = chuseok_enough_hangwa
		
		piety = 10
		wealth = -5
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOT = {
					trait = gluttonous
				}
			}
			modifier = {
				factor = 0.1
				trait = gluttonous
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = temperate
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_5 # Why bother?
		
		set_character_flag = chuseok_no_hangwa
		
		piety = -10
		
		if = {
			limit = {
				trait = gluttonous
			}
			remove_trait = gluttonous
		}
		else_if = {
			limit = {
				NOT = {
					trait = temperate
				}
			}
			random = {
				chance = 15
				add_trait = temperate
			}
		}
		if = {
			limit = {
				trait = zealous
			}
			remove_trait = zealous
		}
		else_if = {
			limit = {
				NOT = {
					trait = cynical
				}
			}
			random = {
				chance = 15
				add_trait = cynical
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = gluttonous
				NOT = {
					trait = cynical
				}
			}
		}
	}
}

# Prepare drinks for everyone?
character_event = {
	id = chuseok.6
	desc = EVTDESC_CHUSEOK_6
	picture = GFX_evt_emissary # TODO
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		has_character_modifier = chuseok_in_progress
	}
	
	option = {
		name = EVTOPTA_CHUSEOK_6 # I will prepare quite a few extra!
		
		set_character_flag = chuseok_extra_drinks
		
		piety = 25
		wealth = -10
		
		if = {
			limit = {
				trait = temperate
			}
			remove_trait = temperate
		}
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else_if = {
			limit = {
				NOT = {
					trait = zealous
				}
			}
			random = {
				chance = 15
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOR = {
					trait = drunkard
					trait = hedonist
				}
			}
			modifier = {
				factor = 0.1
				trait = cynical
				OR = {
					trait = drunkard
					trait = hedonist
				}
			}
			modifier = {
				factor = 0.1
				trait = temperate
				trait = zealous
			}
			modifier = {
				factor = 0
				trait = temperate
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_6 # Prepare enough for everyone!
		
		set_character_flag = chuseok_enough_drinks
		
		piety = 10
		wealth = -5
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cynical
				NOR = {
					trait = drunkard
					trait = hedonist
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = drunkard
					trait = hedonist
				}
				trait = zealous
			}
			modifier = {
				factor = 0.1
				trait = temperate
				NOT = {
					trait = zealous
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_6 # Why bother?
		
		set_character_flag = chuseok_no_drinks
		
		piety = -10
		
		if = {
			limit = {
				NOT = {
					trait = temperate
				}
			}
			random = {
				chance = 15
				add_trait = temperate
			}
		}
		if = {
			limit = {
				trait = zealous
			}
			remove_trait = zealous
		}
		else_if = {
			limit = {
				NOT = {
					trait = cynical
				}
			}
			random = {
				chance = 15
				add_trait = cynical
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 0.1
				OR = {
					trait = drunkard
					trait = hedonist
				}
				NOT = {
					trait = cynical
				}
			}
		}
	}
}

# Food preparations - copied from vanilla
character_event = {
	id = chuseok.7
	desc = EVTDESC_CHUSEOK_7
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy

	only_rulers = yes
	capable_only = yes
	prisoner = no
	war = no

	is_triggered_only = yes

	trigger = {
		has_character_modifier = chuseok_in_progress
		NOT = {
			has_character_flag = lavishly_food
		}
		NOT = {
			has_character_flag = medium_food
		}
		NOT = {
			has_character_flag = low_food
		}
	}

	option = {
		name = "EVTOPTA72003" #Spend lavishly on food
		gain_weight_small_effect = yes
		weight_trait_check_effect = yes
		trigger = { NOT = { trait = temperate } }
		ai_chance = {

			factor = 30

			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 3
				trait = gluttonous
			}
			modifier = {
				factor = 0.1
				trait = temperate
			}
			modifier = {
				factor = 2
				primary_title = { higher_tier_than = DUKE }
			}
		}
		set_character_flag = lavishly_food
		treasury = -20
		prestige = 10
	}
	option = {
		name = "EVTOPTB72003" #Spend medium on food
		ai_chance = {
			factor = 30

			modifier = {
				factor = 0.5
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 2
				NOT = { trait = gluttonous }
			}
			modifier = {
				factor = 2
				primary_title = { tier = DUKE }
			}
		}
		set_character_flag = medium_food
		treasury = -10
	}
	option = {
		name = "EVTOPTC72003" #Spend low on food
		trigger = { NOT = { trait = gluttonous } }
		ai_chance = {
			factor = 30

			modifier = {
				factor = 2.5
				trait = greedy
			}
			modifier = {
				factor = 0.1
				trait = gluttonous
			}
			modifier = {
				factor = 2
				primary_title = { tier = COUNT }
			}
		}
		set_character_flag = low_food
		treasury = -5
		prestige = -5
	}
}

# Time to send out invitations
character_event = {
	id = chuseok.8
	desc = EVTDESC_CHUSEOK_8
	picture = GFX_evt_chinese_bureaucrat # TODO
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	only_rulers = yes
	capable_only = yes
	prisoner = no
	war = no

	trigger = {
		has_character_modifier = chuseok_in_progress
		OR = {
			has_character_flag = lavishly_food
			has_character_flag = medium_food
			has_character_flag = low_food
		}
		NOT = {
			has_character_flag = sent_invitations
		}
	}
	
	option = {
		name = "EVTOPTA72010"
		set_character_flag = sent_invitations
		custom_tooltip = {
			text = EVTTOOLTIP1_RoI_1000
		}
		hidden_tooltip = {
			narrative_event = { id = chuseok.11 days = 10 } # Start of Chuseok
			any_vassal = {
				limit = {
					NOT = { is_inaccessible_trigger = yes }
					prisoner = no
					NOT = { has_character_flag = do_not_disturb }
					NOT = { trait = incapable }
					NOT = { has_character_modifier = chuseok_in_progress }
					war = no
					is_adult = yes
					NOT = {
						trait = treasure_fleet_preparation
					}
				}
				letter_event = {
					id = chuseok.9
					days = 2
					#tooltip = "EVTTOOLTIP72011"
				}
			}
		}
	}
}

# Vassal gets invitation
letter_event = {
	id = chuseok.9
	desc = EVTDESC_CHUSEOK_9

	is_triggered_only = yes

	trigger = { NOT = { is_inaccessible_trigger = yes } }

	option = {
		name = EVTOPTA_CHUSEOK_9 # Travel to the Chuseok
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				opinion = { who = from value = -40 }
			}
			modifier  = {
				factor = 2
				opinion = { who = from value = -20 }
			}
		}
		set_character_flag = coming_to_chuseok
		set_character_flag = do_not_disturb
	}
	option = {
		name = EVTOPTB_CHUSEOK_9 # Refuse
		ai_chance = {
			factor = 1
			modifier  = {
				factor = 2
				NOT = { opinion = { who = from value = -60 } }
			}
			modifier  = {
				factor = 2
				NOT = { opinion = { who = from value = -80 } }
			}
		}
		FROM = {
			letter_event = {
				id = chuseok.10
				days = 1
				random = 2
				tooltip = "EVTTOOLTIP72012"
			}
		}
	}
}

# Vassal refused invitation
letter_event = {
	id = chuseok.10
	desc = EVTDESC_CHUSEOK_10

	is_triggered_only = yes

	option = {
		name = "EVTOPTA72012"
		opinion = {
			modifier = opinion_dislike
			who = FROM
			years = 10
		}
	}
}

#### Start of Chuseok

# Start of Chuseok - host
narrative_event = {
	id = chuseok.11
	title = EVTTITLE_CHUSEOK_11
	desc = EVTDESC_CHUSEOK_11
	picture = GFX_evt_china_open # TODO
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_11 # Welcome!
		
		set_character_flag = host_chuseok_started
		# TODO: Cleanup
		
		hidden_tooltip = {
			# Welcome the guests
			any_vassal = {
				limit = {
					has_character_flag = coming_to_chuseok
				}
				set_character_flag = guest_chuseok_started
				# TODO: Cleanup
			}
			any_vassal = {
				limit = {
					ai = no # No need to spam the AI
					has_character_flag =  coming_to_chuseok
				}
				narrative_event = { id = chuseok.12 }
			}
			
			# Event selection
			character_event = { id = chuseok.13 days = 2 }
		}
	}
}

# Start of Chuseok - guests
narrative_event = {
	id = chuseok.12
	title = EVTTITLE_CHUSEOK_12
	desc = EVTDESC_CHUSEOK_12
	picture = GFX_evt_china_open # TODO
	border = GFX_event_narrative_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_12 # This should be fun!
	}
}

##### Event selection + event groups 1

# Event selection 1
character_event = {
	id = chuseok.13
	hide_window = yes

	is_triggered_only = yes

	only_rulers = yes
	capable_only = yes
	prisoner = no
	war = no

	trigger = {
		has_character_modifier = chuseok_in_progress
	}
	
	immediate = {
		# Food complaints - based on vanilla
		random_list = {
			10 = { #Lavish food (vassal)
				modifier = {
					factor = 0
					NOR = {
						has_character_flag = lavishly_food
						any_vassal = {
							has_character_flag = coming_to_chuseok
							war = no
						}
					}
				}
				any_vassal = {
					limit = { 
						has_character_flag = coming_to_chuseok
						war = no
					}
					score_value = { #Prioritizes selecting an interesting courtier...
						value = 10
						interesting_courtier_selection_score = yes
					}
					character_event = { id = chuseok.14 days = 1 } # High food
				}
			}
			10 = { #Medium food (vassal)
				modifier = {
					factor = 0
					NOR = {
						has_character_flag = medium_food
						any_vassal = {
							has_character_flag = coming_to_chuseok
							war = no
						}
					}
				}
				any_vassal = {
					limit = { 
						has_character_flag = coming_to_chuseok
						war = no
					}
					score_value = { #Prioritizes selecting an interesting courtier...
						value = 10
						interesting_courtier_selection_score = yes
					}
					character_event = { id = chuseok.15 days = 1 } # Medium food
				}
			}
			10 = { #Low food (vassal)
				modifier = {
					factor = 0
					NOR = {
						has_character_flag = low_food
						any_vassal = {
							has_character_flag = coming_to_chuseok
							war = no
						}
					}
				}
				any_vassal = {
					limit = { 
						has_character_flag = coming_to_chuseok
						war = no
					}
					score_value = { #Prioritizes selecting an interesting courtier...
						value = 10
						interesting_courtier_selection_score = yes
					}
					character_event = { id = chuseok.16 days = 1 } # Low food
				}
			}
		}
		
		# Juldarigiri
		character_event = { id = chuseok.19 days = 2 random = 1 } # Host start
		
		# Random events
		random_list = {
			25 = {
				modifier = {
					factor = 0
					NOT = {
						any_vassal = {
							count = 2
							has_character_flag = coming_to_chuseok
							war = no
						}
					}
				}
				any_vassal = {
					limit = { 
						has_character_flag = coming_to_chuseok
						war = no
					}
					score_value = { #Prioritizes selecting an interesting courtier...
						value = 10
						interesting_courtier_selection_score = yes
					}
					save_event_target_as = chuseok_friend
					ROOT = {
						any_vassal = {
							limit = { 
								has_character_flag = coming_to_chuseok
								war = no
								NOR = {
									character = event_target:chuseok_friend
									any_friend = {
										character = event_target:chuseok_friend
									}
								}
							}
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							character_event = { id = chuseok.35 days = 10 random = 2 } # Possible friendship
						}
					}
				}
			}
			25 = {
				modifier = {
					factor = 0
					NOT = {
						any_vassal = {
							count = 2
							has_character_flag = coming_to_chuseok
							war = no
						}
					}
				}
				any_vassal = {
					limit = { 
						has_character_flag = coming_to_chuseok
						war = no
					}
					score_value = { #Prioritizes selecting an interesting courtier...
						value = 10
						interesting_courtier_selection_score = yes
					}
					save_event_target_as = chuseok_rival
					ROOT = {
						any_vassal = {
							limit = { 
								has_character_flag = coming_to_chuseok
								war = no
								NOR = {
									character = event_target:chuseok_rival
									any_rival = {
										character = event_target:chuseok_rival
									}
								}
							}
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							character_event = { id = chuseok.39 days = 10 random = 2 } # Possible rivalry
						}
					}
				}
			}
			25 = {
				random_list = {
					50 = {
						character_event = { id = chuseok.41 days = 10 random = 2 }
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_vassal = {
									has_character_flag = coming_to_chuseok
									war = no
								}
							}
						}
						any_vassal = {
							limit = { 
								has_character_flag = coming_to_chuseok
								war = no
								is_adult = yes
							}
							random = {
								chance = 25
								character_event = { id = chuseok.41 days = 10 random = 2 } # Harvest discussion
							}
						}
					}
				}
			}
			25 = {
				random_list = {
					50 = {
						modifier = {
							factor = 0
							OR = {
								NOT = {
									culture_group = koreanic
								}
								religion = korean_pagan
								religion = korean_pagan_reformed
								trait = zealous
								NOT = {
									has_acceptable_chinese_religion_trigger = yes
								}
								controls_religion = yes
							}
						}
						if = {
							limit = {
								has_global_flag = korean_reformation
							}
							character_event = { id = chuseok.49 days = 10 random = 2 } # Convert to reformed Muist?
						}
						else = {
							character_event = { id = chuseok.50 days = 10 random = 2 } # Convert to Muist?
						}
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_vassal = {
									has_character_flag = coming_to_chuseok
									war = no
									culture_group = koreanic
									NOR = {
										religion = korean_pagan
										religion = korean_pagan_reformed
										trait = zealous
									}
									has_acceptable_chinese_religion_trigger = yes
									controls_religion = yes
								}
							}
						}
						any_vassal = {
							limit = { 
								has_character_flag = coming_to_chuseok
								war = no
								culture_group = koreanic
								NOR = {
									religion = korean_pagan
									religion = korean_pagan_reformed
									trait = zealous
								}
								has_acceptable_chinese_religion_trigger = yes
								controls_religion = yes
							}
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							if = {
								limit = {
									has_global_flag = korean_reformation
								}
								character_event = { id = chuseok.49 days = 10 random = 2 } # Convert to reformed Muist?
							}
							else = {
								character_event = { id = chuseok.50 days = 10 random = 2 } # Convert to Muist?
							}
						}
					}
				}
			}
			25 = {
				random_list = {
					50 = {
						modifier = {
							factor = 0
							OR = {
								NOR = {
									AND = {
										has_acceptable_chinese_culture_trigger = yes
										has_acceptable_chinese_religion_trigger = yes
									}
									AND = {
										culture_group = japonic
										religion = shinto
										controls_religion = no # If relevant
									}
								}
								religion = buddhist
								trait = zealous
								controls_religion = yes
							}
						}
						character_event = { id = chuseok.51 days = 10 random = 2 } # Convert to Buddhist?
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_vassal = {
									has_character_flag = coming_to_chuseok
									war = no
									OR = {
										AND = {
											has_acceptable_chinese_culture_trigger = yes
											has_acceptable_chinese_religion_trigger = yes
										}
										AND = {
											culture_group = japonic
											religion = shinto
											controls_religion = no # If relevant
										}
									}
									NOR = {
										religion = buddhist
										trait = zealous
										controls_religion = yes
									}
								}
							}
						}
						any_vassal = {
							limit = { 
								has_character_flag = coming_to_chuseok
								war = no
								OR = {
									AND = {
										has_acceptable_chinese_culture_trigger = yes
										has_acceptable_chinese_religion_trigger = yes
									}
									AND = {
										culture_group = japonic
										religion = shinto
										controls_religion = no # If relevant
									}
								}
								NOR = {
									religion = buddhist
									trait = zealous
									controls_religion = yes
								}
							}
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							character_event = { id = chuseok.51 days = 10 random = 2 } # Convert to Buddhist?
						}
					}
				}
			}
			1 = { # Rarer!
				random_list = {
					50 = {
						modifier = {
							factor = 0
							OR = {
								NAND = {
									has_acceptable_chinese_culture_trigger = yes
									has_acceptable_chinese_religion_trigger = yes
								}
								religion = taoist
								trait = zealous
								controls_religion = yes
							}
						}
						character_event = { id = chuseok.52 days = 10 random = 2 } # Convert to Taoist?
					}
					50 = {
						modifier = {
							factor = 0
							NOT = {
								any_vassal = {
									has_character_flag = coming_to_chuseok
									war = no
									has_acceptable_chinese_culture_trigger = yes
									has_acceptable_chinese_religion_trigger = yes
									NOR = {
										religion = taoist
										trait = zealous
										controls_religion = yes
									}
								}
							}
						}
						any_vassal = {
							limit = { 
								has_character_flag = coming_to_chuseok
								war = no
								has_acceptable_chinese_culture_trigger = yes
								has_acceptable_chinese_religion_trigger = yes
								NOR = {
									religion = taoist
									trait = zealous
									controls_religion = yes
								}
							}
							score_value = { #Prioritizes selecting an interesting courtier...
								value = 10
								interesting_courtier_selection_score = yes
							}
							character_event = { id = chuseok.52 days = 10 random = 2 } # Convert to Taoist?
						}
					}
				}
			}
			50 = {} # Nothing
		}
		
		# On to the next event group
		character_event = { id = chuseok.53 days = 15 }
	}
}

### Food complaints - based on vanilla

# Lavish Food
character_event = {
	id = chuseok.14
	desc = EVTDESC_CHUSEOK_14
	picture = GFX_evt_feast

	only_rulers = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		FROM = {
			has_character_modifier = chuseok_in_progress
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHUSEOK_14 # Approve publicly
		trigger = {
			NOT = { trait = temperate }
		}
		gain_weight_small_effect = yes
		weight_trait_check_effect = yes
		ai_chance = {
			factor = 40

			modifier = {
				factor = 5
				trait = gluttonous
			}
		}
		FROM = {
			character_event = { id = chuseok.17 }
		}
	}
	option = {
		name = EVTOPTB_CHUSEOK_14 # Disapprove
		trigger = {
			NOT = { trait = gluttonous }
		}
		ai_chance = {
			factor = 20

			modifier = {
				factor = 5
				trait = temperate
			}
		}
		FROM = {
			character_event = { id = chuseok.18 }
		}
	}
	option = {
		name = EVTOPTC_CHUSEOK_14 # Say nothing
		prestige = -10
	}
}

# Medium Food
character_event = {
	id = chuseok.15
	desc = EVTDESC_CHUSEOK_15
	picture = GFX_evt_feast

	only_rulers = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		FROM = {
			has_character_modifier = lny_in_progress
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHUSEOK_15 # Approve publicly
		FROM = {
			character_event = { id = chuseok.17 }
		}
	}
	option = {
		name = EVTOPTB_CHUSEOK_15 # Disapprove publicly
		FROM = {
			character_event = { id = chuseok.18 }
		}
	}
	option = {
		name = EVTOPTC_CHUSEOK_15 # Say nothing
		prestige = -10
	}
}

# Low Food
character_event = {
	id = chuseok.16
	desc = EVTDESC_CHUSEOK_16
	picture = GFX_evt_feast

	only_rulers = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		FROM = {
			has_character_modifier = lny_in_progress
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHUSEOK_16 #Approve publicly
		trigger = {
			NOT = { trait = gluttonous }
		}
		ai_chance = {
			factor = 20

			modifier = {
				factor = 5
				trait = temperate
			}
		}
		FROM = {
			character_event = { id = chuseok.17 }
		}
	}
	option = {
		name = EVTOPTB_CHUSEOK_16 #Disapprove publicly
		trigger = {
			NOT = { trait = temperate }
		}
		ai_chance = {
			factor = 40

			modifier = {
				factor = 5
				trait = gluttonous
			}
		}
		FROM = {
			character_event = { id = chuseok.18 }
		}
	}
	option = {
		name = EVTOPTC_CHUSEOK_16 # Say nothing
		prestige = -10
	}
}

# Liege is glad you liked the food at the feast
character_event = {
	id = chuseok.17
	desc = EVTDESC_CHUSEOK_17
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHUSEOK_17 # Good!
		opinion = {
			modifier = opinion_happy
			who = FROM
			years = 10
		}
		reverse_opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

# Liege dislikes you complaining about the food at the feast
character_event = {
	id = chuseok.18
	desc = EVTDESC_CHUSEOK_18
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHUSEOK_18 # Shut up!
		opinion = {
			modifier = opinion_irritated
			who = FROM
			years = 10
		}
		reverse_opinion = {
			modifier = opinion_disapprove
			who = FROM
			years = 10
		}
	}
}

### Juldarigiri

# Rig the contest or not?
character_event = {
	id = chuseok.19
	desc = EVTDESC_CHUSEOK_19
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		has_character_modifier = chuseok_in_progress
	}
	
	immediate = {
		any_vassal = {
			limit = { 
				has_character_flag = coming_to_chuseok
				war = no
			}
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			character_event = { id = chuseok.20 days = 1 } # Juldarigiri complainer
		}
		any_vassal = {
			limit = { 
				has_character_flag = coming_to_chuseok
				war = no
				is_adult = yes
			}
			score_value = { #Prioritizes selecting an interesting courtier...
				value = 10
				interesting_courtier_selection_score = yes
			}
			character_event = { id = chuseok.22 days = 3 } # Juldarigiri innuendo
		}
		character_event = { id = chuseok.24 days = 5 } # Determine outcome
	}
	
	option = {
		name = EVTOPTA_CHUSEOK_19 # Rigging the contest is normal!
		
		prestige = -10
		
		set_character_flag = chuseok_rigged_juldarigiri
		
		if = {
			limit = {
				trait = honest
			}
			random = {
				chance = 5
				remove_trait = honest
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = honest
			}
			modifier = {
				factor = 0.1
				trait = just
			}
			modifier = {
				factor = 0.1
				trait = zealous
			}
		}
	}
	
	option = {
		name = EVTOPTA_CHUSEOK_19 # Rigging the contest is wrong!
		
		piety = 10
		
		set_character_flag = chuseok_not_rigged_juldarigiri
		
		if = {
			limit = {
				trait = deceitful
			}
			random = {
				chance = 5
				remove_trait = deceitful
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = deceitful
			}
			modifier = {
				factor = 0.1
				trait = arbitrary
			}
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}
}

# Complain about side?
character_event = {
	id = chuseok.20
	desc = EVTDESC_CHUSEOK_20
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_20 # This is fine!
		
		piety = 10
		
		if = {
			limit = {
				trait = proud
			}
			random = {
				chance = 5
				remove_trait = proud
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = proud
			}
			modifier = {
				factor = 0.1
				trait = stubborn
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_20 # I want to be on the other side!
		
		piety = -10
		
		FROM = {
			character_event = { id = chuseok.21 days = 1 } # Complaint registered
		}
		
		if = {
			limit = {
				trait = humble
			}
			random = {
				chance = 5
				remove_trait = humble
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = humble
			}
			modifier = {
				factor = 0.1
				trait = shy
			}
		}
	}
}

# Complaints
character_event = {
	id = chuseok.21
	desc = EVTDESC_CHUSEOK_21
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_21 # Oh shut up!
	}
}

# Innuendo
character_event = {
	id = chuseok.22
	desc = EVTDESC_CHUSEOK_22
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_22 # I won't sink that low!
		
		prestige = -10
		
		if = {
			limit = {
				trait = lustful
			}
			random = {
				chance = 5
				remove_trait = lustful
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = lustful
			}
			modifier = {
				factor = 0.1
				trait = seducer
			}
			modifier = {
				factor = 0.1
				trait = seductress
			}
			modifier = {
				factor = 0.1
				trait = hedonist
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_22 # I'll join in!
		
		prestige = 10
		
		if = {
			limit = {
				FROM = {
					any_vassal = { 
						has_character_flag = coming_to_chuseok
						war = no
						is_adult = yes
						NOT = {
							character = ROOT
						}
					}
				}
			}
			FROM = {
				any_vassal = {
					limit = { 
						has_character_flag = coming_to_chuseok
						war = no
						is_adult = yes
					}
					score_value = { #Prioritizes selecting an interesting courtier...
						value = 10
						interesting_courtier_selection_score = yes
					}
					character_event = { id = chuseok.23 days = 1 } # React to innuendo
				}
			}
		}
		else = {
			FROM = {
				character_event = { id = chuseok.23 days = 1 } # React to innuendo
			}
		}
		
		if = {
			limit = {
				trait = chaste
			}
			random = {
				chance = 5
				remove_trait = chaste
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = chaste
			}
			modifier = {
				factor = 0.1
				trait = shy
			}
			modifier = {
				factor = 0
				trait = celibate
			}
		}
	}
}

# Reaction to innuendo
character_event = {
	id = chuseok.23
	desc = EVTDESC_CHUSEOK_23
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_23 # How crude!
		
		if = {
			limit = {
				trait = lustful
			}
			random = {
				chance = 5
				remove_trait = lustful
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = lustful
			}
			modifier = {
				factor = 0.1
				trait = seducer
			}
			modifier = {
				factor = 0.1
				trait = seductress
			}
			modifier = {
				factor = 0.1
				trait = hedonist
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_23 # I like the way [From.GetSheHe] thinks!
		
		if = {
			limit = {
				is_adult = yes
				is_inaccessible_or_incapable_trigger = no
				OR = {
					AND = {
						is_female = no
						NOT = {
							trait = homosexual
						}
						ROOT = {
							is_female = yes
							NOT = {
								trait = homosexual
							}
						}
					}
					AND = {
						is_female = yes
						NOT = {
							trait = homosexual
						}
						ROOT = {
							is_female = no
							NOT = {
								trait = homosexual
							}
						}
					}
					AND = {
						is_female = yes
						trait = homosexual
						ROOT = {
							is_female = yes
							trait = homosexual
						}
					}
					AND = {
						is_female = no
						trait = homosexual
						ROOT = {
							is_female = no
							trait = homosexual
						}
					}
				}
			}
			character_event = { id = chuseok.29 days = 2 } # Possible tumbling attempt
		}
		
		if = {
			limit = {
				trait = chaste
			}
			random = {
				chance = 5
				remove_trait = chaste
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = chaste
			}
			modifier = {
				factor = 0.1
				trait = shy
			}
			modifier = {
				factor = 0
				trait = celibate
			}
		}
	}
}

# Select outcome - hidden
character_event = {
	id = chuseok.24
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			50 = {
				modifier = {
					factor = 10
					has_character_flag = chuseok_rigged_juldarigiri
					has_game_rule = {
						name = supernatural_events
						value = off
					}
				}
				modifier = {
					factor = 2
					has_character_flag = chuseok_rigged_juldarigiri
					OR = {
						AND = {
							ai = yes
							has_game_rule = {
								name = supernatural_events
								value = unrestricted
							}
						}
						AND = {
							ai = no
							NOT = {
								has_game_rule = {
									name = supernatural_events
									value = off
								}
							}
						}
					}
				}
				character_event = { id = chuseok.25 } # Female win
			}
			50 = {
				modifier = {
					factor = 0.1
					has_character_flag = chuseok_not_rigged_juldarigiri
					OR = {
						AND = {
							ai = yes
							has_game_rule = {
								name = supernatural_events
								value = unrestricted
							}
						}
						AND = {
							ai = no
							NOT = {
								has_game_rule = {
									name = supernatural_events
									value = off
								}
							}
						}
					}
				}
				character_event = { id = chuseok.27 } # Male win
			}
		}
	}
}

# Female win - liege
character_event = {
	id = chuseok.25
	desc = EVTDESC_CHUSEOK_25
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_25 # Great!
		
		prestige = 25
		
		any_vassal = {
			limit = {
				ai = no
				has_character_flag = coming_to_chuseok
			}
			character_event = { id = chuseok.26 }
		}
		
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						AND = {
							ai = yes
							has_game_rule = {
								name = supernatural_events
								value = unrestricted
							}
						}
						AND = {
							ai = no
							NOT = {
								has_game_rule = {
									name = supernatural_events
									value = off
								}
							}
						}
					}
				}
				random = {
					chance = 25
					random_demesne_province = {
						change_variable = { which = prosperity_value value = 2 }
					}
				}
			}
		}
	}
}

# Female win - guest
character_event = {
	id = chuseok.26
	desc = EVTDESC_CHUSEOK_26
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_26 # Great!
	}
}

# Male win - liege
character_event = {
	id = chuseok.27
	desc = EVTDESC_CHUSEOK_27
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_27 # That's not good...
		
		prestige = -25
		
		any_vassal = {
			limit = {
				ai = no
				has_character_flag = coming_to_chuseok
			}
			character_event = { id = chuseok.28 }
		}
		
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						AND = {
							ai = yes
							has_game_rule = {
								name = supernatural_events
								value = unrestricted
							}
						}
						AND = {
							ai = no
							NOT = {
								has_game_rule = {
									name = supernatural_events
									value = off
								}
							}
						}
					}
				}
				random = {
					chance = 25
					random_demesne_province = {
						change_variable = { which = prosperity_value value = -2 }
					}
				}
			}
		}
	}
}

# Male win - guest
character_event = {
	id = chuseok.28
	desc = EVTDESC_CHUSEOK_28
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_28 # That's not good...
	}
}

# Innuendo follow-up - approach them?
character_event = {
	id = chuseok.29
	desc = EVTDESC_CHUSEOK_29
	picture = GFX_evt_china_invades
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_29 # Yes!
		
		FROMFROM = {
			character_event = { id = chuseok.30 days = 1 } # Other party approached
		}
		
		piety = -10
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = chaste
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 0
				is_ascetic_trigger = yes
				NOT = {
					trait = lustful
				}
			}
			modifier = {
				factor = 0.1
				FROMFROM = {
					is_unattractive_trigger = yes
				}
			}
			modifier = {
				factor = 5
				FROMFROM = {
					is_attractive_trigger = yes
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_29 # I don't think so!
		
		piety = 10
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = lustful
			}
			modifier = {
				factor = 0
				OR = {
					trait = seducer
					trait = seductress
				}
			}
		}
	}
}

# Target approached
character_event = {
	id = chuseok.30
	desc = EVTDESC_CHUSEOK_30
	picture = GFX_evt_china_invades
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_30 # Yes!
		
		FROM = {
			character_event = { id = chuseok.32 } # FROM informed
		}
		unprotected_sex_effect = yes
		
		piety = -10
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = chaste
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 0
				is_ascetic_trigger = yes
				NOT = {
					trait = lustful
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					is_unattractive_trigger = yes
				}
			}
			modifier = {
				factor = 5
				FROM = {
					is_attractive_trigger = yes
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_30 # I don't think so!
		
		FROM = {
			character_event = { id = chuseok.31 } # FROM informed
		}
		
		piety = 10
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = lustful
			}
			modifier = {
				factor = 0
				OR = {
					trait = seducer
					trait = seductress
				}
			}
		}
	}
}

# Seduction failed
character_event = {
	id = chuseok.31
	desc = EVTDESC_CHUSEOK_31
	picture = GFX_evt_treasure_fleet
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_31 # I see...
		
		prestige = -25
	}
}

# Seduction succeeded - lovers?
character_event = {
	id = chuseok.32
	desc = EVTDESC_CHUSEOK_32
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_32 # We should do this again!
		
		add_lover = FROM
		
		FROM = {
			character_event = { id = chuseok.33 days = 1 } # Inform FROM
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_32 # This shouldn't become a long-term thing...
		
		FROM = {
			character_event = { id = chuseok.34 days = 1 } # Inform FROM
		}
	}
}

# Lovers
character_event = {
	id = chuseok.33
	desc = EVTDESC_CHUSEOK_33
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_33 # That's great!
		
		add_lover = FROM
	}
}

# Not lovers
character_event = {
	id = chuseok.34
	desc = EVTDESC_CHUSEOK_34
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_34 # Perhaps that's for the best...
	}
}

### Friendship

# Possible friendship
character_event = {
	id = chuseok.35
	desc = EVTDESC_CHUSEOK_35
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_35 # Let's be friends!
		
		event_target:chuseok_friend = {
			character_event = { id = chuseok.36 days = 1 }
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = {
					opinion = {
						who = event_target:chuseok_friend
						value = 0
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_35 # I don't need another friend!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				opinion = {
					who = event_target:chuseok_friend
					value = 0
				}
			}
		}
	}
}

# Possible friend gets to respond
character_event = {
	id = chuseok.36
	desc = EVTDESC_CHUSEOK_36
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_36 # Let's be friends!
		
		add_friend = FROM
		
		FROM = {
			character_event = { id = chuseok.37 }
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = {
					opinion = {
						who = FROM
						value = 0
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_36 # I don't need another friend!
		
		prestige = -10
		
		FROM = {
			character_event = { id = chuseok.38 }
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				opinion = {
					who = FROM
					value = 0
				}
			}
		}
	}
}

# Friends
character_event = {
	id = chuseok.37
	desc = EVTDESC_CHUSEOK_37
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_37 # Great!
		
		add_friend = FROM
	}
}

# Not friends
character_event = {
	id = chuseok.38
	desc = EVTDESC_CHUSEOK_38
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_38 # I see...
		
		prestige = -10
	}
}

### Rivalry

# Possible rivalry
character_event = {
	id = chuseok.39
	desc = EVTDESC_CHUSEOK_39
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_39 # I hate them!
		
		event_target:chuseok_rival = {
			add_rival = ROOT
			character_event = { id = chuseok.40 }
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				opinion = {
					who = event_target:chuseok_rival
					value = 0
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_39 # I don't need another rival!
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = {
					opinion = {
						who = event_target:chuseok_rival
						value = 0
					}
				}
			}
		}
	}
}

# Rivalry declared
character_event = {
	id = chuseok.40
	desc = EVTDESC_CHUSEOK_40
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_40 # I hate you too!
		
		add_rival = FROM
	}
}

### Harvest discussion

# Take part in a discussion about the harvest?
character_event = {
	id = chuseok.41
	desc = EVTDESC_CHUSEOK_41
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_41 # Sure!
		
		random_list = {
			10 = {
				modifier = {
					factor = 2
					stewardship = 10
				}
				modifier = {
					factor = 2
					stewardship = 15
				}
				modifier = {
					factor = 2
					stewardship = 20
				}
				character_event = { id = chuseok.42 days = 2 } # Discussion goes well - gain prestige
			}
			10 = {
				modifier = {
					factor = 0
					has_stewardship_education_trigger = yes
					NOT = {
						trait = midas_touched
					}
				}
				character_event = { id = chuseok.43 days = 2 } # Discussion goes well - upgrade education
			}
			10 = {
				character_event = { id = chuseok.44 days = 2 } # Discussion goes well - become more Diligent
			}
			100 = {
				character_event = { id = chuseok.45 days = 2 } # Discussion goes okay
			}
			10 = {
				modifier = {
					factor = 0.5
					stewardship = 10
				}
				modifier = {
					factor = 0.5
					stewardship = 15
				}
				modifier = {
					factor = 0
					stewardship = 20
				}
				character_event = { id = chuseok.46 days = 2 } # Discussion goes poorly - lose prestige
			}
			10 = {
				character_event = { id = chuseok.47 days = 2 } # Discussion goes poorly - become more Wroth
			}
			10 = {
				character_event = { id = chuseok.48 days = 2 } # Discussion goes poorly - become less Gregarious
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = slothful
			}
			modifier = {
				factor = 0.1
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHUSEOK_41 # This is not a time for work!
		
		prestige = -10
		
		if = {
			limit = {
				trait = stressed
			}
			remove_trait = stressed
		}
		if = {
			limit = {
				trait = diligent
			}
			random = {
				chance = 15
				remove_trait = diligent
			}
		}
		else = {
			random = {
				chance = 15
				add_trait = slothful
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = diligent
			}
			modifier = {
				factor = 0.1
				trait = ambitious
			}
		}
	}
}

# Discussion goes well - gain prestige
character_event = {
	id = chuseok.42
	desc = EVTDESC_CHUSEOK_42
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_42 # Great!
		
		prestige = 50
	}
}

# Discussion goes well - upgrade Stewardship education
character_event = {
	id = chuseok.43
	desc = EVTDESC_CHUSEOK_43
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_43 # Great!
		
		if = {
			limit = {
				trait = fortune_builder
			}
			remove_trait = fortune_builder
			add_trait = midas_touched
		}
		else_if = {
			limit = {
				trait = thrifty_clerk
			}
			remove_trait = thrifty_clerk
			add_trait = fortune_builder
		}
		else = {
			remove_trait = indulgent_wastrel
			add_trait = thrifty_clerk
		}
	}
}

# Discussion goes well - become more Diligent
character_event = {
	id = chuseok.44
	desc = EVTDESC_CHUSEOK_44
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_44 # Great!
		
		if = {
			limit = {
				trait = slothful
			}
			remove_trait = slothful
		}
		else = {
			add_trait = diligent
		}
	}
}

# Discussion goes okay
character_event = {
	id = chuseok.45
	desc = EVTDESC_CHUSEOK_45
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_45 # Could be worse...
	}
}

# Discussion goes poorly - lose prestige
character_event = {
	id = chuseok.46
	desc = EVTDESC_CHUSEOK_46
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_46 # Curses!
		
		prestige = -50
	}
}

# Discussion goes poorly - become more Wroth
character_event = {
	id = chuseok.47
	desc = EVTDESC_CHUSEOK_47
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_47 # Curses!
		
		if = {
			limit = {
				trait = patient
			}
			remove_trait = patient
		}
		else = {
			add_trait = wroth
		}
	}
}

# Discussion goes poorly - become less Gregarious
character_event = {
	id = chuseok.48
	desc = EVTDESC_CHUSEOK_48
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_48 # Curses!
		
		if = {
			limit = {
				trait = gregarious
			}
			remove_trait = gregarious
		}
		else = {
			add_trait = shy
		}
	}
}

### Religion conversion

# Muist
character_event = {
	id = chuseok.49
	desc = EVTDESC_CHUSEOK_49
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_49 # I'll become Must!
		
		religion = korean_pagan
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = {
					culture_group = koreanic
				}
			}
			modifier = {
				factor = 0.1
				NOR = {
					religion = buddhist
					secret_religion = korean_pagan
				}
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				liege = {
					religion = korean_pagan
				}
			}
		}
		name = EVTOPTB_CHUSEOK_49 # I'll become a secret Must!
		
		secret_religion = korean_pagan
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = {
					culture_group = koreanic
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					religion = buddhist
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_49 # I think not!
		
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else = {
			random = {
				chance = 25
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}
}

# Reformed Muist
character_event = {
	id = chuseok.50
	desc = EVTDESC_CHUSEOK_50
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_50 # I'll become Must!
		
		religion = korean_pagan_reformed
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = {
					culture_group = koreanic
				}
			}
			modifier = {
				factor = 0.1
				NOR = {
					religion = buddhist
					secret_religion = korean_pagan_reformed
				}
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				liege = {
					religion = korean_pagan_reformed
				}
			}
		}
		name = EVTOPTB_CHUSEOK_50 # I'll become a secret Must!
		
		secret_religion = korean_pagan_reformed
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = {
					culture_group = koreanic
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					religion = buddhist
				}
			}
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_50 # I think not!
		
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else = {
			random = {
				chance = 25
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}
}

# Buddhist
character_event = {
	id = chuseok.51
	desc = EVTDESC_CHUSEOK_51
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_51 # I'll become Buddhist!
		
		religion = buddhist
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				NOT = {
					secret_religion = buddhist
				}
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				liege = {
					religion = buddhist
				}
			}
		}
		name = EVTOPTB_CHUSEOK_51 # I'll become a secret Buddhist!
		
		secret_religion = buddhist
		
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_51 # I think not!
		
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else = {
			random = {
				chance = 25
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}
}

# Taoist
character_event = {
	id = chuseok.52
	desc = EVTDESC_CHUSEOK_52
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_stewardship
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHUSEOK_52 # I'll become Taoist!
		
		religion = taoist
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.1
				NOT = {
					secret_religion = taoist
				}
			}
		}
	}
	
	option = {
		trigger = {
			NOT = {
				liege = {
					religion = taoist
				}
			}
		}
		name = EVTOPTB_CHUSEOK_52 # I'll become a secret Taoist!
		
		secret_religion = taoist
		
		ai_chance = {
			factor = 10
		}
	}
	
	option = {
		name = EVTOPTC_CHUSEOK_52 # I think not!
		
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
		else = {
			random = {
				chance = 10 # Intentionally lower
				add_trait = zealous
			}
		}
		
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.1
				trait = cynical
			}
		}
	}
}

##### Event selection + event groups 2

# Event selection 2

##### Event selection + event groups 3

# Event selection 3

##### End of Chuseok + cleanup events